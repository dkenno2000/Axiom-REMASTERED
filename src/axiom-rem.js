function e(){try{(async()=>{try{const t=await b({type:"getActiveStreams"});if(!t||!t.ok)return;const n=t.streams||{};for(const r of Object.keys(n)){const o=n[r];x(r,o.meta||{});if(o.lastFrame){E(r,o.meta||{},o.lastFrame,null,null,o.ts||Date.now())}}}catch(e){}})()}catch(e){}}e();window.__rem_pageToken=typeof window.__rem_pageToken==="number"?window.__rem_pageToken:0;window._pump_connecting=window._pump_connecting||false;window.__rem_marketCapColorsEnabled=true;window.__rem_chartsForAll=true;window.__rem_twitterPreview=true;window.__rem_pulseCloneMenu=true;window.__rem_bigTwitterLinks=false;window.__rem_pumpStreams=window.__rem_pumpStreams||false;try{chrome.storage.local.get(["marketCapColors","chartsForAll","twitterPreview","pulseCloneMenu","bigTwitterLinks"],e=>{if(e&&typeof e.marketCapColors!=="undefined")window.__rem_marketCapColorsEnabled=!!e.marketCapColors;if(e&&typeof e.chartsForAll!=="undefined")window.__rem_chartsForAll=!!e.chartsForAll;if(e&&typeof e.twitterPreview!=="undefined")window.__rem_twitterPreview=!!e.twitterPreview;if(e&&typeof e.pulseCloneMenu!=="undefined")window.__rem_pulseCloneMenu=!!e.pulseCloneMenu;if(e&&typeof e.bigTwitterLinks!=="undefined")window.__rem_bigTwitterLinks=!!e.bigTwitterLinks;Lr()})}catch(B){console.warn("REMASTERED: Failed to load settings.",B);Lr()}(function(){if(!window.__rem_lifecycle){window.__rem_lifecycle={resources:{navigation:new Set,pulse:new Set,meme:new Set,global:new Set}}}const r=window.__rem_lifecycle;function e(e){try{if(e==="meme"){if(typeof S==="function"){try{S()["catch"]?.(()=>{})}catch(B){}}}}catch(B){}if(!r.resources[e])return;for(const t of Array.from(r.resources[e])){try{switch(t.type){case"observer":if(t.instance?.disconnect)t.instance.disconnect();break;case"interval":if(t.id)clearInterval(t.id);break;case"timeout":if(t.id)clearTimeout(t.id);break;case"listener":if(t.target&&t.handler){try{const n=typeof t.capture==="boolean"?t.capture:t.options;t.target.removeEventListener(t.event,t.handler,t.originalOptions)}catch(B){}}break;case"dom-watcher":d.off(t.selector,t.handler);break;case"runtime-listener":try{if(t.handler)chrome.runtime.onMessage.removeListener(t.handler)}catch(B){}break;case"livekit-listener":try{if(t.instance&&t.handler&&t.event){try{if(typeof t.instance.off==="function"){t.instance.off(t.event,t.handler)}else if(typeof t.instance.removeListener==="function"){t.instance.removeListener(t.event,t.handler)}}catch(B){}}}catch(B){}break;case"component":if(t.element?.parentNode){t.element.parentNode.removeChild(t.element)}break}}catch(B){console.warn(`Cleanup error for ${t.type}:`,B)}}r.resources[e].clear();if(e==="pulse"){try{try{kn(u)}catch(B){}try{Xn()}catch(B){}try{if(typeof A!=="undefined"&&A instanceof Map)A.clear()}catch(B){}try{if(typeof I!=="undefined"&&I instanceof Set)I.clear()}catch(B){}try{if(typeof F!=="undefined"&&F instanceof Map)F.clear()}catch(B){}try{Bn=new WeakMap;un=new WeakMap;L=new WeakMap;T.clear();jn.clear();P.clear()}catch(B){}try{Qn=false;q=false}catch(B){}}catch(B){console.warn("Extra pulse cleanup failed",B)}}}function t(){e("pulse");e("meme");e("global")}function s(e,t){if(!r.resources[e]){r.resources[e]=new Set}r.resources[e].add(t);return t}function n(e,t,n,r=false,o,i="meme"){if(!e||typeof e.addEventListener!=="function")return null;e.addEventListener(t,n,r);return s(i,{type:"listener",target:e,event:t,handler:n,originalOptions:r,description:o||`${t} listener`})}function o(e,t,n="meme"){return s(n,{type:"observer",instance:e,description:t||"Observer"})}function i(e,t,n="meme"){return s(n,{type:"timeout",id:e,description:t||"Timeout"})}function c(e,t,n="meme"){return s(n,{type:"interval",id:e,description:t||"Interval"})}function a(e,t,n="meme"){d.on(e,t);window.__rem_registerResource(n,{type:"dom-watcher",selector:e,handler:t,description:`DOMWatcher: ${e}`})}function l(e,t,n="meme"){return s(n,{type:"component",element:e,description:t||"Component"})}window.__rem_cleanupPage=e;window.__rem_cleanupAll=t;window.__rem_registerResource=s;window.__rem_registerListener=n;window.__rem_registerObserver=o;window.__rem_registerTimeout=i;window.__rem_registerInterval=c;window.__rem_registerDOMWatcher=a;window.__rem_registerComponent=l})();const t=".flex.flex-col.h-screen-safe > .flex.flex-1.flex-row > .flex > .flex.flex-col.w-full.h-full > .flex-1.border-primaryStroke";const k='div[style*="position: absolute"] > div > .relative > .border-primaryStroke\\/50';const i=".flex.flex-row.w-full > .flex-1.h-full > .flex.flex-col.w-full > .flex.flex-row.w-full > span";const j='img[src*="axiom.trade/images/"]';const W=".h-\\[calc\\(100vh\\+360px\\)\\].w-\\[320px\\]";const u=".flex.flex-col.h-screen-safe > .flex.flex-1.flex-row.overflow-hidden.relative > .flex.flex-row.overflow-hidden:has(.flex.flex-row.w-full.h-full)";const U=".flex.flex-col.w-full.h-full > .flex-none.flex.flex-row.w-full > .flex.flex-row";const H="#platform-layout > .border-b.border-primaryStroke > .flex.items-center > div.hidden.sm\\:flex";const a="rem-menu";const $="rem-mirror-cards";const s="rem-mirror-btn";const z="rem-mirrored-pnl-percentage";const K="rem-quick-buy-container";const N="meme-info-container";const V="twitter-info-container";const Q="remastered-x-pulse-feed";const J=["q","w","e","r"];const Z=["a","s","d","f"];function b(e){return new Promise(t=>{try{chrome.runtime.sendMessage(e,e=>{if(chrome.runtime.lastError){return t({ok:false,error:chrome.runtime.lastError.message})}return t(e)})}catch(B){t({ok:false,error:B.message})}})}async function G(t,n){return new Promise(e=>chrome.storage.local.set({[t]:n},e))}async function X(n){return new Promise(t=>chrome.storage.local.get([n],e=>t(e[n])))}function Y(n,r=100){let o=null;return function(...e){const t=this;clearTimeout(o);o=setTimeout(()=>n.apply(t,e),r)}}const d=function(){const s=new Map;let t=null;function c(e,t,n){if(e.nodeType!==1)return;if(e.matches&&e.matches(t)){n(e);return}if(e.querySelectorAll){const r=e.querySelectorAll(t);r.forEach(e=>n(e))}}function n(e){for(const t of e){if(t.type!=="childList")continue;const n=t.addedNodes;if(n.length===0)continue;for(const r of n){for(const[o,i]of s){c(r,o,t=>{i.forEach(e=>e(t))})}}}}function a(){if(t)return;t=new MutationObserver(n);const e=document.getElementById("root")||document.body;t.observe(e,{childList:true,subtree:true})}return{waitFor:(i,s=1e4)=>{return new Promise((t,e)=>{const n=document.querySelector(i);if(n)return t(n);a();let r=null;const o=e=>{if(r)clearTimeout(r);d.off(i,o);t(e)};d.on(i,o);r=setTimeout(()=>{d.off(i,o);e(new Error(`Timeout waiting for ${i}`))},s)})},on:(e,t)=>{a();if(!s.has(e)){s.set(e,new Set)}s.get(e).add(t);const n=document.querySelectorAll(e);n.forEach(e=>t(e))},off:(e,t)=>{if(s.has(e)){s.get(e)["delete"](t);if(s.get(e).size===0){s["delete"](e)}}}}}();function O(e,t=8e3){return d.waitFor(e,t)}let ee=0;const te=120;let ne=null;let re=null;async function oe(){return new Promise(e=>{try{const t=document.activeElement;if(t&&t.tagName==="IFRAME"){try{t.blur()}catch(B){}}try{window.focus()}catch(B){}try{document.body.focus()}catch(B){}}catch(B){}setTimeout(()=>{try{window.focus()}catch(B){}try{document.body.focus()}catch(B){}},60);e()})}async function ie(e){const t=Date.now();if(t-ee<te)return;ee=t;await oe();window.dispatchEvent(new KeyboardEvent("keydown",{code:"Space",key:" ",bubbles:true,cancelable:true}));window.dispatchEvent(new KeyboardEvent("keydown",{code:"Key"+e.toUpperCase(),key:e,bubbles:true,cancelable:true}));window.dispatchEvent(new KeyboardEvent("keyup",{code:"Key"+e.toUpperCase(),key:e,bubbles:true,cancelable:true}));window.dispatchEvent(new KeyboardEvent("keyup",{code:"Space",key:" ",bubbles:true,cancelable:true}))}let se=null;let n=null;let ce=false;function c(){const e=document.getElementById(a);if(e&&e.isConnected)return e;const t=document.querySelector(H);if(!t)return null;if(e&&!t.contains(e)){e.remove()}const n=!window.location.pathname.startsWith("/pulse");const r="relative flex items-center justify-center h-[32px] w-[32px] my-auto ml-2 rounded-md transition-colors";const o=document.createElement("div");o.id=a;o.className=n?`${r} disabled`:r;o.setAttribute("aria-hidden","false");const i=document.createElement("button");i.className="relative bg-primaryStroke hover:bg-secondaryStroke/80 flex flex-row w-[32px] h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full";o.appendChild(i);const s=document.createElement("i");s.className="text-textPrimary ri-menu-fold-2-fill text-[18px]";s.style.pointerEvents="none";i.appendChild(s);const c=Array.from(t.querySelectorAll(".contents")).pop();if(c&&c.parentNode===t){t.insertBefore(o,c)}else{t.appendChild(o)}ae(o);return o}function ae(e){const t="rem-open";e.addEventListener("mouseenter",()=>{if(!e.classList.contains("disabled")&&!ce){le()}if(!e.classList.contains("disabled")){e.classList.add(t)}});e.addEventListener("mouseleave",()=>{e.classList.remove(t)})}function le(){if(ce)return;if(!window.location.pathname.startsWith("/pulse"))return;const e=document.getElementById(a);if(!e)return;const t=document.querySelectorAll(U);let n=null;for(const i of t){if(!i.closest("#"+a)&&i.isConnected){n=i;break}}if(!n)return;let r=e.querySelector(".rem-dropdown");if(!r){r=document.createElement("div");r.className="rem-dropdown";const o=document.createElement("div");o.className="rem-dropdown-inner";r.appendChild(o);e.appendChild(r)}const o=e.querySelector(".rem-dropdown-inner");try{n.style.visibility="inherit";n.style.position="static";n.style.pointerEvents="auto";o.appendChild(n);ce=true;const s=document.getElementById("rem-pulse-menu-hide-style");if(s)s.remove()}catch(B){}}let r=null;function ue(){const e=c();if(e)e.classList.remove("disabled");if(!r){r=e=>{let t=document.getElementById(a);if(!t||!t.isConnected){t=c()}if(t)t.classList.remove("disabled")}}window.__rem_registerDOMWatcher(H,r,"pulse");if(n)clearTimeout(n);n=setTimeout(()=>{le()},5e3);window.__rem_registerTimeout(n,"pulse menu timer","pulse")}function de(){if(r){d.off(H,r)}if(n)clearTimeout(n);const e=document.getElementById(a);if(e){e.classList.add("disabled");e.classList.remove("rem-open");const t=e.querySelector(".rem-dropdown-inner");if(t)t.innerHTML=""}ce=false}function me(e){if(!window.__rem_pulseCloneMenu)return;c();if(e==="pulse"){ue()}else{de();c();const t=document.getElementById(a);if(t)t.classList.add("disabled")}}function fe(){if(window.__rem_pulseCloneMenu){me(window.location.pathname.startsWith("/pulse")?"pulse":"other");document.body.classList.add("rem-pulse-clone-menu-enabled")}if(!window.__rem_pumpStreams){window.__rem_pumpStreams=true;setTimeout(()=>{chrome.runtime.sendMessage({type:"pumpLiveStreamConnect"})},1e3)}}let pe=null;let he=false;let ye=null;let we=false;async function ge(){const e=W+" .relative > .flex.sm\\:hidden.flex-col.flex-1.w-full.min-h-0.h-full";const t=e=>{if(document.getElementById(K))return;const n=document.createElement("div");n.className="rem-quick-buy-container";n.id=K;n.style.display="flex";n.style.flexDirection="column";n.style.width="100%";const t=document.createElement("div");t.className="rem-quick-buy-buttons active";t.style.cssText="display:flex; gap:8px; padding:0px 16px 6px 16px;";const r=document.createElement("div");r.className="rem-quick-sell-buttons";r.style.cssText="display:flex; gap:8px; padding:2px 16px;";let o={};try{o=JSON.parse(localStorage.getItem("settings"))}catch(B){}const i=o?.solQuickSets||["1","2","3","4"];const s=o?.percentageQuickSets||["1","2","3","4"];const c=[];const a=[];const l=e=>{const t=Array.from(e.querySelectorAll("button"));return t.find(e=>{const t=(e.textContent||"").trim();return t==="Sell"&&e.offsetParent!==null&&(e.classList.contains("bg-decrease")||e.classList.contains("bg-transparent"))})};const u=(e,t,n)=>{const r=document.createElement("button");r.className="rem-btn";r.textContent=e!==undefined?e:`${t+1}`;const o=()=>{ie(n?J[t]:Z[t]);if(n&&!we){we=true;(async()=>{await new Promise(e=>setTimeout(e,100));const e=document.querySelector(W);const t=e||document;const n=l(t);if(n)window.__rem_synthClick(n);await new Promise(e=>setTimeout(e,50));const r=t.querySelector("i.ri-arrow-up-s-line");if(r){const o=r.closest("button");if(o&&o.offsetParent!==null)window.__rem_synthClick(o)}await new Promise(e=>setTimeout(e,150));if(window.__rem_performSellExtras)window.__rem_performSellExtras(t)})()}};window.__rem_registerListener(r,"click",o,false,"QuickWidget click","meme");return r};for(let e=0;e<4;e++){const d=u(i[e],e,true);t.appendChild(d);c.push(d)}for(let e=0;e<4;e++){const m=u(s[e],e,false);r.appendChild(m);a.push(m)}chrome.storage.local.get(["KeyboardShortcuts"],e=>{const t=e&&e.KeyboardShortcuts;n.dataset.keysActive=t?"1":"0";n.classList.toggle("rem-keys-enabled",Boolean(t));n.classList.toggle("rem-keys-disabled",!t)});n.appendChild(t);n.appendChild(r);e.insertAdjacentElement("afterend",n);window.__rem_registerComponent(n,"Quick Buy Widget","meme");if(ye)clearInterval(ye);ye=setInterval(()=>{let e={};try{e=JSON.parse(localStorage.getItem("settings"))}catch(B){}const t=e?.solQuickSets;const n=e?.percentageQuickSets;for(let e=0;e<4;e++){const r=t&&t[e]!==undefined?t[e]:`${e+1}`;if(c[e]&&c[e].textContent!==r)c[e].textContent=r}for(let e=0;e<4;e++){const r=n&&n[e]!==undefined?n[e]:`${e+1}`;if(a[e]&&a[e].textContent!==r)a[e].textContent=r}},5e3);window.__rem_registerInterval(ye,"QuickWidget update interval","meme")};window.__rem_registerDOMWatcher(e,t,"meme")}async function _e(){const n="button.bg-increase.font-bold.flex.flex-row.flex-1.justify-center.items-center";const o="button.bg-decrease.font-bold.flex.flex-row.flex-1.justify-center.items-center";const r="button.group.border-primaryStroke.border.flex.flex-row.justify-center.items-center.rounded-full.cursor-pointer:has(i.ri-arrow-up-s-line)";const i="button.group.border-primaryStroke.border.flex.flex-row.justify-center.items-center.rounded-full.cursor-pointer:has(i.ri-arrow-down-s-line)";const s=await O(W)["catch"](()=>null);if(!s)return;await new Promise(e=>setTimeout(e,25));try{const t=document.querySelector(i)?document.querySelector(i):null;if(t&&t.querySelector("i.ri-arrow-down-s-line"))t.click()}catch(B){}function c(){const e=document.querySelector(r);if(e)return e;const t=document.querySelector(i);if(t)return t;return null}function a(e){if(!e)return true;const t=e.querySelector("i");return!!(t&&t.classList.contains("ri-arrow-up-s-line"))}window.__rem_synthClick=function l(e){if(!e)return;try{const r=e.getBoundingClientRect();const o=r.left+r.width/2;const i=r.top+r.height/2;const s={bubbles:true,cancelable:true,composed:true,clientX:o,clientY:i,pointerType:"mouse"};e.dispatchEvent(new PointerEvent("pointerdown",s));e.dispatchEvent(new PointerEvent("pointerup",s));e.dispatchEvent(new MouseEvent("click",s))}catch(t){try{e.click()}catch(n){}}};function d(e,t){if(!e)return false;try{const n=Object.getPrototypeOf(e);const r=Object.getOwnPropertyDescriptor(n,"value")?.set;if(r)r.call(e,t);else e.value=t;e.dispatchEvent(new Event("input",{bubbles:true}));e.dispatchEvent(new Event("change",{bubbles:true}));return true}catch(B){return false}}window.__rem_performSellExtras=async function m(n=document){function r(e){if(e!==document&&e.classList){const t=e.querySelector(".hidden.sm\\:flex.flex-col");if(t)return t}try{const n=".hidden.sm\\:flex.flex-col";const t=e.querySelector(n);if(t)return t}catch(B){}return null}for(let e=1;e<=8;e++){try{const o=r(n)||n;try{const i=Array.from(o.querySelectorAll("button,div,span")).find(e=>(e.textContent||"").trim()==="Limit");if(i){const s=i.closest("button")||i;if(s)window.__rem_synthClick(s)}}catch(B){}await new Promise(e=>setTimeout(e,140));let t=false;try{const c=Array.from(o.querySelectorAll("div,button,span")).filter(e=>{const t=(e.textContent||"").trim();return t==="100"||t===" 100"||t==="100 "});let e=null;if(c.length>0){e=c.find(e=>e.closest("div")?.querySelector('input[type="range"]'))||c[0]}if(e){const a=e.closest("button")||e.closest("div")||e;if(a){window.__rem_synthClick(a);t=true}}}catch(B){}await new Promise(e=>setTimeout(e,120));let e=false;try{const l=o.querySelector('input[type="range"][min="-100"][max="100"]')||n.querySelector('input[type="range"]');if(l){d(l,"-10");e=true}if(!e){const u=Array.from(o.querySelectorAll("input")).find(e=>{const t=(e.value||"").trim();return/^-?\d+/.test(t)||e.parentElement?.textContent?.includes("%")});if(u){d(u,"-10");e=true}}}catch(B){}if(e)return true}catch(t){}await new Promise(e=>setTimeout(e,200))}return false};const e=e=>{const t=e.target&&(e.target.closest?e.target.closest(n)||e.target.closest(o):null);if(!t)return;const r=!!(t.closest?t.closest(o)||t.matches&&t.matches(o):false);setTimeout(async()=>{try{await new Promise(e=>requestAnimationFrame(e));const t=c();if(!t)await new Promise(e=>setTimeout(e,60));const n=c();if(n&&a(n)){window.__rem_synthClick(n);if(r){setTimeout(()=>{window.__rem_performSellExtras?.(s)},100)}return}if(r){setTimeout(()=>{window.__rem_performSellExtras?.(s)},100)}}catch(e){}},0)};window.__rem_registerListener(document,"click",e,false,"[MEME] Sidebar delegated buy/sell","meme")}function be(t){if(!Array.isArray(t)||t.length===0)return t;let n=0;for(let e=0;e<t.length;e++)n+=t[e].close;const e=n/t.length;if(e<.001){const r=1e6;const o=new Array(t.length);for(let e=0;e<t.length;e++){const i=t[e];o[e]={time:i.time,open:i.open*r,high:i.high*r,low:i.low*r,close:i.close*r}}return o}return t.map(e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}))}function ve(e,t,n={}){if(!e||!t||t.length===0)return;const r=window.devicePixelRatio||1;const o=e.offsetWidth||e.width||140;const i=e.offsetHeight||e.height||50;const s=Math.max(1,Math.floor(o*r));const c=Math.max(1,Math.floor(i*r));if(e.width!==s||e.height!==c){e.width=s;e.height=c;e.style.width=o+"px";e.style.height=i+"px"}const a=e.getContext("2d");a.clearRect(0,0,s,c);const l=be(t);let u=Infinity,d=-Infinity,m=l.length;for(let e=0;e<m;e++){const _=l[e];if(typeof _.low==="number"&&_.low<u)u=_.low;if(typeof _.high==="number"&&_.high>d)d=_.high}if(!isFinite(u)||!isFinite(d)||d===u)return;const f=s/m;const p=f*.5;const h=f*.12;const y=Math.max(1,Math.floor(f*.76));const w=n.upColor||"#26a69a";const g=n.downColor||"#f57575";a.beginPath();for(let e=0;e<m;e++){const _=l[e];if(!_||typeof _.open!=="number"||typeof _.close!=="number")continue;const b=Math.floor(e*f+p);const v=Math.floor(c-(_.high-u)/(d-u)*c);const x=Math.floor(c-(_.low-u)/(d-u)*c);a.moveTo(b+.5,v+.5);a.lineTo(b+.5,x+.5)}a.strokeStyle=n.wickColor||"#888";a.lineWidth=Math.max(1,Math.round(r));a.stroke();for(let t=0;t<m;t++){const _=l[t];if(!_||typeof _.open!=="number"||typeof _.close!=="number")continue;const k=Math.floor(t*f+h);const E=Math.floor(c-(_.open-u)/(d-u)*c);const C=Math.floor(c-(_.close-u)/(d-u)*c);const S=Math.min(E,C);let e=Math.max(1,Math.abs(E-C));const L=_.close>=_.open?w:g;a.fillStyle=L;a.fillRect(k+.5,S+.5,y,e)}}window.LightweightCharts={CandlestickSeries:"CandlestickSeries",createChart(e,t={}){let n=e.querySelector(".rem-chart-container");if(!n){n=document.createElement("div");n.className="rem-chart-container";n.style.width=(t.width||140)+"px";n.style.height=(t.height||50)+"px";e.appendChild(n)}let i=n.querySelector("canvas");if(!i){i=document.createElement("canvas");i.style.width="100%";i.style.height="100%";n.appendChild(i)}return{addSeries(e,r={}){const n=e=>{if(!Array.isArray(e))return[];return e.map(e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}))};const t=e=>{const t=n(e);i._candles=t;ve(i,t,r)};const o=e=>{const t=i._candles||[];const n=t.concat([{time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}]);i._candles=n;ve(i,n,r)};return{setData:t,update:o}},remove(){if(i&&i.parentNode)i.parentNode.removeChild(i)},timeScale(){return{fitContent(){}}}}}};async function xe(){const e=document.querySelector('#pair-name-tooltip a[href^="https://pump.fun/coin/"]');if(!e)return null;const t=await b({type:"getPumpFunDescription",url:e.href});if(t?.ok)return t.description||null;return null}async function ke(){const e=document.querySelector('#pair-name-tooltip a[href^="https://believe.app/coin/"]');if(!e)return null;try{const n=await b({type:"getBelieveFunDescription",url:e.href});if(n?.ok&&n.description){return n.description}return null}catch(t){console.warn("Error fetching description:",t);return null}}async function Ee(){const e=document.querySelector('#pair-name-tooltip a[href^="https://jup.ag/studio/"]');if(!e)return null;const t=e.href.match(/studio\/([^?#]*?jups)(?=[?#]|$)/i);const n=t?.[1]??null;if(!n)return null;try{const o=await b({type:"getJupiterDescription",tokenId:n});if(o?.ok&&o.description){return o.description}return null}catch(r){console.error("Error fetching description:",r);return null}}async function Ce(){const e=document.querySelector('#pair-name-tooltip a[href^="http://9gag.com/gag/"]');if(!e)return null;try{const n=await b({type:"getMoonitDescription",url:e.href});if(n?.ok&&n.description){return n.description}return null}catch(t){console.warn("Error fetching description:",t);return null}}async function Se(){const e=document.querySelector('#pair-name-tooltip a[href^="https://letsbonk.fun/token/"]');const t=document.querySelector('#pair-name-tooltip a[href^="https://bonk.fun/token/"]');if(!e&&!t)return null;const n=e?.getAttribute("href")||t?.getAttribute("href");const r=n?.split("/token/")[1];if(!r)return null;try{const i=await b({type:"getBonkDescription",tokenId:r});if(i?.ok&&i.description){return i.description}return null}catch(o){console.error("Error fetching description:",o);return null}}async function Le(){const e=document.querySelector('#pair-name-tooltip a[href^="https://raydium.io/launchpad/token/?mint="]');if(!e)return null;const t=e.getAttribute("href");const n=t.split("?mint=")[1];if(!n)return null;try{const o=await b({type:"getLaunchLabDescription",tokenId:n});if(o?.ok&&o.description){return o.description}return null}catch(r){console.error("Error fetching description:",r);return null}}async function Te(){const e=document.querySelector('#pair-name-tooltip a[href^="https://bags.fm/"]');if(!e)return null;const t=e.getAttribute("href");const n=t.split(".fm/")[1];if(!n)return null;try{const o=await b({type:"getBagsFmDescription",tokenId:n});if(o?.ok&&o.description){return o.description}return null}catch(r){console.error("Error fetching description:",r);return null}}async function Me(){const e=document.querySelector('#pair-name-tooltip a[href^="https://four.meme/token/"]');if(!e)return null;const t=e?.getAttribute("href");const n=t?.split("/token/")[1];try{const o=await b({type:"getFourMemeDescription",tokenId:n});if(o?.ok&&o.description){return o.description}return null}catch(r){console.warn("Error fetching description:",r);return null}}async function Ae(){const e=document.querySelector('#pair-name-tooltip a[href^="https://app.launchonsoar.com/project/"]');if(!e)return null;const t=e?.getAttribute("href");const n=t?.split("/project/")[1]?.split("?")[0];try{const o=await b({type:"getSoarDescription",tokenId:n});if(o?.ok&&o.description){return o.description}return null}catch(r){console.warn("Error fetching description:",r);return null}}const qe={meme:{expanded:true,toggleHeader:null,contentContainer:null}};let Ie=false;async function Fe(){const e=W+" > div:nth-child(3)";const t=async e=>{const t=document.getElementById(N);if(t&&t.isConnected)return;if(t&&!t.isConnected)t.remove();const n=e.parentNode;if(!n)return;const r=document.createElement("div");r.id=N;r.style.borderRadius="8px";r.className="flex flex-col border-primaryStroke border-b";window.__rem_registerComponent(r,"Meme info container","meme");const o=()=>{if(document.getElementById(N))return;if(!n.isConnected)return;const e=document.getElementById("pump-video-container");if(e&&e.parentNode===n){n.insertBefore(r,e.nextSibling);return}const t=n.children[2];if(t){t.insertAdjacentElement("afterend",r)}else{n.appendChild(r)}};o();const i=new MutationObserver(e=>{let t=false;for(const n of e){for(const r of n.removedNodes){if(r.id===N)t=true}}if(t||!document.getElementById(N)){setTimeout(o,50)}});i.observe(n,{childList:true});window.__rem_registerObserver(i,"Meme Info Persistence","meme");let s=document.querySelector(".pump-image-modal");if(!s){s=document.createElement("div");s.className="pump-image-modal";s.innerHTML=`<div class="modal-pump-content"><img class="modal-pump-image" src=""></div>`;document.body.appendChild(s)}window.__rem_registerListener(s,"click",()=>s.classList.remove("active"),false,"Modal close bg","meme");const c=s.querySelector(".modal-pump-content");if(c){window.__rem_registerListener(c,"click",e=>e.stopPropagation(),false,"Modal content stopProp","meme")}window.__rem_registerListener(document,"keydown",e=>{if(e.key==="Escape"&&s.classList.contains("active"))s.classList.remove("active")},false,"Modal ESC","meme");await O("#pair-name-tooltip",5e3)["catch"](()=>null);const l=document.querySelector(".text-nowrap.flex.flex-col.justify-start.items-start:has(#pair-name-tooltip) span.text-textPrimary.font-medium:first-child > span > div");const a=document.querySelector(".text-nowrap.flex.flex-col.justify-start.items-start:has(#pair-name-tooltip) .contents > button.text-textTertiary span.font-medium:first-child > span > div");const u=document.querySelector(".text-nowrap.flex.flex-col.justify-start.items-start:has(#pair-name-tooltip) .flex.flex-row > .justify-start.items-start > .flex.flex-row");if(l&&u){if(!u.querySelector("#rem-quick-search")){const g=document.createElement("span");g.id="rem-quick-search";g.className="contents";g.title="Quick search by name";g.innerHTML=`
          <span class="contents">
            <button type="button" class="group flex flex-row gap-[4px] justify-center items-center transition-all duration-150 ease-in-out cursor-pointer">
              <div class="relative flex items-center justify-center w-[16px] h-[16px]">
                <i class="text-textSecondary ri-search-line text-[16px] hover:text-primaryBlueHover transition-colors duration-[125ms]"></i>
              </div>
            </button>
          </span>
        `;u.appendChild(g);const _=g.querySelector("button");async function d(e){try{e.stopPropagation();e.preventDefault();const n=l&&l.textContent?l.textContent.trim():"";if(!n)return;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(n)}catch(o){}const i=()=>{const e={key:"/",code:"Slash",keyCode:191,which:191,bubbles:true,cancelable:true};document.dispatchEvent(new KeyboardEvent("keydown",e));document.dispatchEvent(new KeyboardEvent("keypress",e));document.dispatchEvent(new KeyboardEvent("keyup",e))};i();const s=".fixed.inset-0 > .w-full .flex > input";const c=async(e=2e3)=>{const t=Date.now();while(Date.now()-t<e){const n=document.querySelector(s);if(n)return n;await new Promise(e=>setTimeout(e,100))}return null};let r=await c();if(!r){await new Promise(e=>setTimeout(e,80));i();r=await c(1500)}if(!r)return;try{r.focus()}catch(B){}const a=e=>{try{const t=window.HTMLInputElement.prototype;const n=Object.getOwnPropertyDescriptor(t,"value")?.set;if(n)n.call(r,e);else r.value=e}catch(B){r.value=e}try{r.setSelectionRange(e.length,e.length)}catch(o){}r.dispatchEvent(new InputEvent("input",{bubbles:true,cancelable:true,data:e,inputType:"insertText"}));r.dispatchEvent(new Event("change",{bubbles:true}))};a(n);setTimeout(()=>{r=document.querySelector(s)||r;a(n)},80);setTimeout(()=>{r=document.querySelector(s)||r;a(n);try{r.focus()}catch(B){}},120)}catch(t){}}window.__rem_registerListener(_,"click",d,false,"Coin quick search click","meme")}}const m=document.createElement("div");m.innerHTML=`
      <div class="flex flex-row pl-[8px] px-[16px] pt-[4px] gap-[16px] h-[36px]">
        <button class="group/dropdown w-fit flex flex-row hover:bg-primaryStroke/50 text-textSecondary text-[14px] font-medium h-[28px] pl-[8px] pr-[4px] justify-start items-center rounded-[4px] transition-all duration-125 ease-in-out">
          <span class="flex group-hover/dropdown:text-textPrimary transition-all duration-125 ease-in-out items-center gap-1 tracking-[-0.02em]">Coin Info<i class="ri-arrow-drop-down-line text-[16px] transition-transform duration-150 rotate-0"></i>
          </span>
        </button>
      </div>
    `;m.style.cssText="cursor:pointer; display:flex; justify-content:space-between; align-items:center;";const f=document.createElement("div");f.className="rem-img-desc-cont";f.style.cssText="padding:16px; padding-top:0px; padding-bottom:12px;";r.appendChild(m);r.appendChild(f);const p=document.querySelector('div:has(#pair-name-tooltip).flex.flex-col.flex-1 > .relative.flex.flex-row img[src^="https://axiomtrading"]');const h=document.createElement("div");h.id="rem-token-desc-container";h.className="rem-text";h.style.cssText="padding-left:2px; padding-right:2px; line-height:20px; display:none;";f._setDescription=e=>{if(!e){h.style.display="none";h.textContent="";return}h.style.display="block";h.textContent=e};if(p){const b=document.createElement("div");b.className="rem-desc-flow";const v=document.createElement("img");v.id="rem-pump-image";v.className="rem-left";v.src=p.src||"";b.appendChild(v);window.__rem_registerListener(v,"click",e=>{e.stopPropagation();const t=s.querySelector(".modal-pump-image");if(t)t.src=v.src;s.classList.add("active")},false,"Img click","meme");if(l&&a){const x=document.createElement("div");x.className="text-nowrap gap-[4px]";const k=document.createElement("div");k.id="rem-ticker";k.innerHTML=`<span class="text-textPrimary text-[14px] leading-[18px] font-medium">${l.textContent.trim()}</span>`;const E=document.createElement("div");E.id="rem-name";E.innerHTML=`<span class="text-textTertiary text-[11px] leading-[16px] font-normal">${a.textContent.trim()}</span>`;x.appendChild(k);x.appendChild(E);b.appendChild(x)}b.appendChild(h);f.appendChild(b)}else{f.appendChild(h)}let y=null;try{const C=document.querySelector('#pair-name-tooltip a[href^="https://pump.fun/coin/"]');const S=document.querySelector('#pair-name-tooltip a[href^="https://jup.ag/studio/"]:nth-child(1)');const L=document.querySelector('#pair-name-tooltip a[href^="https://believe.app/coin/"]');const T=document.querySelector('#pair-name-tooltip a[href^="https://letsbonk.fun/token/"]');const M=document.querySelector('#pair-name-tooltip a[href^="https://bonk.fun/token/"]');const A=document.querySelector('#pair-name-tooltip a[href^="http://9gag.com/gag/"]');const q=document.querySelector('#pair-name-tooltip a[href^="https://bags.fm/"]');const I=document.querySelector('#pair-name-tooltip a[href^="https://raydium.io/launchpad/token/?mint="]');const F=document.querySelector('#pair-name-tooltip a[href^="https://four.meme/token/"]');const P=document.querySelector('#pair-name-tooltip a[href^="https://app.launchonsoar.com/project/"]');if(C)y=await xe();if(!y&&S)y=await Ee();if(!y&&L)y=await ke();if(!y&&(T||M))y=await Se();if(!y&&I)y=await Le();if(!y&&A)y=await Ce();if(!y&&q)y=await Te();if(!y&&F)y=await Me();if(!y&&P)y=await Ae()}catch(B){}if(y){f._setDescription(y)}const w=m.querySelector("i.ri-arrow-drop-down-line");chrome.storage.local.get(["memeExpanded"],e=>{const t=typeof e.memeExpanded==="boolean"?e.memeExpanded:true;if(typeof qe!=="undefined")qe.meme={expanded:t};f.style.display=t?"block":"none";if(w)w.style.transform=t?"rotate(0deg)":"rotate(-90deg)"});window.__rem_registerListener(m,"click",()=>{const e=typeof qe!=="undefined"?qe.meme:{expanded:true};e.expanded=!e.expanded;f.style.display=e.expanded?"block":"none";if(w)w.style.transform=e.expanded?"rotate(0deg)":"rotate(-90deg)";chrome.storage.local.set({memeExpanded:e.expanded})},false,"Meme toggle","meme")};window.__rem_registerDOMWatcher(e,t,"meme")}let _=false;async function Pe(){const e="#"+N;const t=async e=>{if(document.getElementById(V))return;const t=document.createElement("div");t.id=V;t.style.borderRadius="4px";e.insertAdjacentElement("afterend",t);window.__rem_registerComponent(t,"Twitter Feed","meme");await O("#pair-name-tooltip",5e3)["catch"](()=>null);const n=document.querySelector('#pair-name-tooltip a[href^="https://x.com/"]:nth-child(1)');const r=document.querySelector("span.text-textPrimary.font-medium > span:nth-child(1) > .min-w-0.whitespace-nowrap.overflow-hidden.truncate");const o=document.querySelector('div:has(.ri-file-list-line) > span a[href^="https://solscan.io/"]');if(!n&&!r){t.remove();return}const i=document.createElement("div");i.innerHTML=`
      <div class="flex flex-row pl-[8px] px-[16px] pt-[4px] gap-[8px] h-[36px] items-center">
        <button id="twitter-toggle-button" class="group/dropdown w-fit flex flex-row hover:bg-primaryStroke/50 text-textSecondary text-[14px] font-medium h-[28px] pl-[8px] pr-[4px] justify-start items-center rounded-[4px] transition-all duration-125 ease-in-out">
          <span class="flex group-hover/dropdown:text-textPrimary transition-all duration-125 ease-in-out items-center gap-1 tracking-[-0.02em]">
            Twitter Feed
            <i class="ri-arrow-drop-down-line text-[16px] transition-transform duration-150 rotate--90deg"></i>
          </span>
        </button>
      </div>
    `;i.style.cssText="cursor:pointer; display:flex; justify-content:space-between; align-items:center;";const s=document.createElement("div");s.style.cssText="padding:6px; padding-top:0px; padding-left:4px; display:none;";const c=document.createElement("div");c.id="twitter-tab-bar";c.style.cssText="display:flex; gap:6px; margin-bottom:8px; align-items:center;";const a=document.createElement("div");a.id="twitter-feeds-container";s.appendChild(c);s.appendChild(a);t.appendChild(i);t.appendChild(s);const l=[];if(n&&!n.href.includes("https://x.com/i/communities/")){try{const m=new URL(n.href);const f=new URL(m).pathname.split("/")[1];if(f){const p=document.createElement("div");p.className="remastered-twitter-feed remastered-twitter-feed-profile fade-mask-container";p.style.display="none";p.innerHTML=`
              <iframe 
                id="iframe-twitter-feed-profile" 
                src="https://nitter.net/${encodeURIComponent(f)}" 
                width="100%" 
                height="600" 
                class="remastered-twitter-feed-body" 
                style="border:none; max-height:1600px; opacity:1; transition:max-height 0.5s, opacity 0.5s; overflow:hidden; display:block;">
              </iframe>`;l.push({key:"profile",title:"Feed",container:p});a.appendChild(p)}}catch(B){}}if(r){try{const h=r.textContent.trimEnd();const y=o?o.href.split("token/")[1]||o.href.split("account/")[1]||"":"";const w=encodeURIComponent(`$${h} OR ${y}`.trim());const p=document.createElement("div");p.className="remastered-twitter-feed remastered-twitter-feed-search fade-mask-container";p.style.display="none";p.innerHTML=`
          <iframe 
            id="iframe-twitter-feed-search" 
            src="https://nitter.net/search?f=tweets&q=${w}" 
            width="100%" 
            height="600" 
            class="remastered-twitter-feed-body" 
            style="border:none; max-height:1600px; opacity:1; transition:max-height 0.5s, opacity 0.5s; overflow:hidden; display:block;">
          </iframe>`;l.push({key:"search",title:"Hype",container:p});a.appendChild(p)}catch(B){}}if(l.length>0){const g=[];l.forEach((t,e)=>{const n=document.createElement("button");n.textContent=t.title;n.className="rem-twitter-tab-btn";n.style.cssText="padding:6px 8px; border-radius:6px; border:none; cursor:pointer; font-size:13px; background:transparent;";if(e===0){n.style.fontWeight="700";n.style.opacity="1";t.container.style.display="block"}else{n.style.fontWeight="400";n.style.opacity="0.7"}window.__rem_registerListener(n,"click",e=>{e.stopPropagation();l.forEach(e=>{e.container.style.display=e.key===t.key?"block":"none"});g.forEach(e=>{if(e===n){e.style.fontWeight="700";e.style.opacity="1"}else{e.style.fontWeight="400";e.style.opacity="0.7"}})},false,"Tab click","meme");c.appendChild(n);g.push(n)})}const u=i.querySelector("#twitter-toggle-button");const d=i.querySelector("i.ri-arrow-drop-down-line");window.__rem_registerListener(u,"click",()=>{_=!_;s.style.display=_?"block":"none";c.style.display=_?"flex":"none";if(d)d.style.transform=_?"rotate(0deg)":"rotate(-90deg)"},false,"Twitter toggle","meme")};window.__rem_registerDOMWatcher(e,t,"meme")}const Ne='[class*="min-w-[100px]"]';let Oe=false;function Re(e){if(!e)return null;let t=e.parentElement;let n=0;while(t&&n<10){const r=t.querySelector(Ne);if(r){const o=Array.from(r.querySelectorAll("span")).some(e=>e.textContent.includes("%"));if(o)return r}t=t.parentElement;n++}return null}function De(e){if(!e)return null;const t=e.querySelectorAll("span");for(const n of t){if(n.textContent.includes("%")&&n.className.includes("text-")){return n}}return null}function Be(e,o){const i=e.querySelector("span.rem-pnl-text");if(!i||!o)return;const t=()=>{try{const e=De(o);if(!e)return;const t=e.textContent||"";if(i.textContent!==t){i.textContent=t}const n=Array.from(e.classList).filter(e=>e.startsWith("text-")||e.includes("font-")).join(" ");const r=`rem-pnl-text ${n}`;if(i.className!==r){i.className=r}}catch(B){}};t();const n=new MutationObserver(t);n.observe(o,{characterData:true,subtree:true,childList:true,attributes:true,attributeFilter:["class"]});e._remSource=o;e._remObserver=n;window.__rem_registerObserver(n,"[MEME] PnL Mirror Sync Observer","meme")}async function je(){const e="#"+s;const t=e=>{if(document.getElementById(z))return;const t=Re(e);if(t){const n=document.createElement("div");n.className=z;n.id=z;n.style.cssText="display:flex; align-items:center; margin-right:8px; font-size:12px; font-weight:500;";n.innerHTML=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.44955 6.75999H12.0395C12.1595 6.75999 12.2695 6.80999 12.3595 6.89999L13.8795 8.45999C14.1595 8.74999 13.9595 9.23999 13.5595 9.23999H3.96955C3.84955 9.23999 3.73955 9.18999 3.64955 9.09999L2.12955 7.53999C1.84955 7.24999 2.04955 6.75999 2.44955 6.75999ZM2.12955 4.68999L3.64955 3.12999C3.72955 3.03999 3.84955 2.98999 3.96955 2.98999H13.5495C13.9495 2.98999 14.1495 3.47999 13.8695 3.76999L12.3595 5.32999C12.2795 5.41999 12.1595 5.46999 12.0395 5.46999H2.44955C2.04955 5.46999 1.84955 4.97999 2.12955 4.68999ZM13.8695 11.3L12.3495 12.86C12.2595 12.95 12.1495 13 12.0295 13H2.44955C2.04955 13 1.84955 12.51 2.12955 12.22L3.64955 10.66C3.72955 10.57 3.84955 10.52 3.96955 10.52H13.5495C13.9495 10.52 14.1495 11.01 13.8695 11.3Z" fill="url(#paint0_linear_88_28943)" />
            <defs><linearGradient id="paint0_linear_88_28943" x1="1.77756" y1="13.3327" x2="13.9679" y2="1.14234" gradientUnits="userSpaceOnUse"><stop stop-color="#9945FF" /><stop offset="0.24" stop-color="#8752F3" /><stop offset="0.465" stop-color="#5497D5" /><stop offset="0.6" stop-color="#43B4CA" /><stop offset="0.735" stop-color="#28E0B9" /><stop offset="1" stop-color="#19FB9B" /></linearGradient></defs>
          </svg>
          <span class="rem-pnl-text"></span>`;e.parentNode.insertBefore(n,e);window.__rem_registerComponent(n,"PnL Mirror","meme");Be(n,t)}};window.__rem_registerDOMWatcher(e,t,"meme")}const We="axiom-chart-mirror";let f=null;try{yt()}catch(B){}let p=null;let Ue=null;const He=2;const $e=560;const ze=.92;const Ke=2e3;function m(){let n=document.getElementById($);if(n)return n;n=document.createElement("div");n.id=$;const e=document.createElement("div");e.className="rem-mirror-header";e.style.cssText="display:flex; align-items:center; justify-content:flex-end; gap:6px; padding:4px;";n.appendChild(e);const t=document.createElement("div");t.id="rem-mirror-cards-wrapper";t.style.cssText="display:flex; gap:14px; align-items:flex-end;";n.appendChild(t);n.cardArea=t;const r=localStorage.getItem("rem_mirror_collapsed")==="1";if(r)n.classList.add("collapsed");const o=document.createElement("button");o.className="rem-mirror-handle";o.type="button";o.textContent=r?"▶":"◀";const i=e=>{e.stopPropagation();const t=n.classList.toggle("collapsed");o.textContent=t?"▶":"◀";localStorage.setItem("rem_mirror_collapsed",t?"1":"0")};window.__rem_registerListener(o,"click",i,{passive:true},"[MIRROR] handle click (collapse)","global");document.body.appendChild(n);document.body.appendChild(o);window.__rem_registerComponent(n,"mirror watch container","global");window.__rem_registerComponent(o,"mirror watch handle","global");if(window.__rem_mirror_cards&&window.__rem_mirror_cards.size>0){const t=n.cardArea||n;for(const[s,c]of window.__rem_mirror_cards){if(c.cardEl&&!c.cardEl.isConnected){t.appendChild(c.cardEl)}}}return n}function h(e){return new Promise(n=>{try{chrome.runtime.sendMessage(e,e=>{if(chrome.runtime.lastError){const t=chrome.runtime.lastError.message;if(t.includes("port closed")||t.includes("receiving end")){n({ok:false,error:"port_closed"})}else{n({ok:false,error:t})}}else{n(e||{ok:false,error:"no response"})}})}catch(B){n({ok:false,error:B?.message||String(B)})}})}function Ve(){return location.pathname.replace(/[^\w-]/g,"_")}function Qe(e){if(!e||typeof e!=="string")return{value:null,match:null};const t=e.split("|")[0]||"";const n=t.match(/\$[0-9]{1,3}(?:[0-9,]*)(?:\.[0-9]+)?\s*[KMBkmb]?/);if(!n)return{value:null,match:null};const r=n[0].trim();const o=r.match(/\$([0-9,.]+)\s*([KMBkmb]?)/);if(!o)return{value:null,match:r};let i=parseFloat(o[1].replace(/,/g,""));const s=(o[2]||"").toUpperCase();if(s==="K")i*=1e3;else if(s==="M")i*=1e6;else if(s==="B")i*=1e9;return{value:Number.isFinite(i)?Math.round(i):null,match:r}}function Je(e){const{value:t,match:n}=Qe(e||"");if(!n)return Ze(e||"");const r=Ge(t);const o=Ze(e||"");const i=Ze(n);const s=o.replace(i,`<span class="rem-mirror-mcap" style="color:${r};">${i}</span>`);return s}function Ze(e){return String(e||"").replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function Ge(e){if(e==null)return"#e6eef8";if(e<3e4)return"#52c5ff";if(e<15e4)return"#dcc13c";return"#2fe3ac"}function Xe(e){try{const t=(document.title||"").trim();if(t&&t.toLowerCase()!=="axiom"&&t.length>3){return t.split("| Axiom")[0].trim()}const n=["span.text-textPrimary.font-medium > span:nth-child(1) > .min-w-0.whitespace-nowrap.overflow-hidden.truncate",'div:has(.ri-file-list-line) > span a[href^="https://solscan.io/"]'];for(const r of n){try{const o=document.querySelector(r);if(o){const i=(o.textContent||"").trim();if(i)return i}}catch(B){}}}catch(B){}return e}let y=null;let w=false;let g=null;let Ye=0;async function et(e,t={}){return h({type:"registerStream",streamId:e,meta:t})}async function tt(n,r,o){return new Promise(t=>{(async()=>{try{const e=await b({type:"registerStream",streamId:n,meta:r,lastFrame:o||null});t(e)}catch(B){t({ok:false,error:String(B)})}})()})}let nt=0;const rt=1e3;function ot(e,t){const n=Date.now();if(n-nt<rt)return;nt=n;try{b({type:"updateStreamFrame",streamId:e,lastFrame:t})["catch"](()=>{})}catch(B){}}async function it(e){return h({type:"unregisterStream",streamId:e})}async function st(){return h({type:"queryStream"})}function ct(e){const t=document.createElement("div");t.className="rem-mirror-toast";t.textContent=e;document.body.appendChild(t);requestAnimationFrame(()=>t.style.opacity="1");setTimeout(()=>{t.style.opacity="0";setTimeout(()=>t.remove(),250)},2500)}async function at(){const e=document.querySelector('iframe[id^="tradingview_"]');if(!e)return{ok:false,error:"no iframe"};let t;try{t=e.contentDocument}catch(d){return{ok:false,error:"iframe_cross_origin"}}const i=t?.querySelector(".chart-gui-wrapper canvas");if(!i)return{ok:false,error:"no canvas"};y=Ve();const n=await h({type:"checkStream",streamId:y});if(n&&n.ok&&n.exists){const m=n.tabId||null;ct("This coin is already being mirrored from another tab.");return{ok:false,error:"already registered",ownerTab:m}}const r=Xe(y);const s={title:r,url:location.href};const o=await et(y,s);if(!o.ok)return{ok:false,error:o.error||"register failed"};try{x(y,s)}catch(B){console.warn("makeCardForStream failed",B)}b&&b({type:"enableDebugger"});Ue=s.title||"";p=setInterval(()=>{try{const e=(document.title||"").trim();const t=e&&e.toLowerCase()!=="axiom"?e.split("| Axiom")[0].trim():Xe(y);if(t!==Ue){Ue=t;s.title=t;try{f.postMessage({type:"meta",streamId:y,meta:s})}catch(B){}h({type:"updateStreamMeta",streamId:y,meta:s})["catch"](()=>{})}}catch(B){}},Ke);window.__rem_registerInterval(p,"[MEME] Mirror title watcher","meme");w=true;Ye=0;const c=document.createElement("canvas");const a=c.getContext("2d");const l=Math.round(1e3/He);const u=async()=>{if(!w)return;try{const e=i.width;const t=i.height;if(e<=0||t<=0)return;let r=e;let o=t;if(e>$e){r=$e;o=Math.round($e/e*t)}if(r<=0||o<=0)return;const n=Math.max(1,window.devicePixelRatio||1);c.width=Math.round(r*n);c.height=Math.round(o*n);a.setTransform(n,0,0,n,0,0);a.clearRect(0,0,r,o);a.drawImage(i,0,0,r,o);a.setTransform(1,0,0,1,0,0);c.toBlob(async e=>{if(!e)return;try{const t=await e.arrayBuffer();try{f.postMessage({type:"frame",streamId:y,meta:s,buf:t,w:r,h:o,ts:Date.now(),frame:Ye++},[t])}catch(d){}const n=new FileReader;n.onload=function(){try{const e=n.result;const t=Date.now();try{x(y,s);E(y,s,e,r,o,t)}catch(B){}ot(y,e)}catch(B){}};n.onerror=function(e){};n.readAsDataURL(e)}catch(d){}},"image/webp",ze)}catch(d){}};g=setInterval(u,l);window.__rem_registerInterval(g,"[MEME] Mirror publish interval","meme");window.dispatchEvent(new CustomEvent("rem:mirrorStarted",{detail:{streamId:y}}));return{ok:true,streamId:y}}async function lt(){if(!w)return{ok:false,error:"not publishing"};w=false;if(g){clearInterval(g);g=null}if(p){clearInterval(p);p=null}if(y){try{f.postMessage({type:"end",streamId:y})}catch(B){}}if(y)await it(y);y=null;Ye=0;b&&b({type:"disableDebugger"});window.dispatchEvent(new CustomEvent("rem:mirrorStopped"));return{ok:true}}chrome.runtime.onMessage.addListener((e,t,n)=>{if(!e||!e.type)return;try{switch(e.type){case"bg-stopStream":if(e.streamId===y){lt();n({ok:true})}else{n({ok:false,error:"stream mismatch"})}return true;case"bg-clearAllStreams":if(w)lt();n({ok:true});return true;case"streamEnded":mt(e.streamId);n({ok:true});return true;case"streamOrder":ut(e.order);n({ok:true});return true;case"streamRegistered":x(e.streamId,e.meta||{});if(e.lastFrame)E(e.streamId,e.lastFrame);n({ok:true});return true;case"streamFrameUpdated":if(e.lastFrame)E(e.streamId,e.lastFrame);n({ok:true});return true;default:return}}catch(r){console.warn("bg message handler error",r);n({ok:false,error:r.message})}});if(!window.__rem_mirror_initialized){window.__rem_mirror_initialized=true;window.__rem_mirror_cards=new Map;ht()}const v=window.__rem_mirror_cards;function x(n,e){if(!n)return null;if(v.has(n))return v.get(n);const t={cardEl:null,imgEl:null,titleEl:null,lastUrl:null,lastTs:0,destroy(){}};v.set(n,t);const r=m();const o=r.cardArea||r;const i=document.createElement("div");i.className="rem-mirror-card";i.dataset.streamId=n;const s=document.createElement("button");s.className="rem-mirror-btn-kill";s.textContent="✕";s.title="Stop and close mirror";const c=document.createElement("div");c.className="rem-mirror-title";const a=e?.title||n;c.innerHTML=Je(a);const l=document.createElement("img");l.style.cssText="position:absolute; inset:0; width:100%; height:100%; display:block;";i.appendChild(l);i.appendChild(c);i.appendChild(s);o.appendChild(i);window.__rem_registerComponent(i,`mirror-card: ${n}`,"global");const u={cardEl:i,imgEl:l,titleEl:c,lastUrl:null,lastTs:0,destroy:()=>{try{const e=v.get(n);if(e&&e.lastUrl&&e.lastUrl.startsWith("blob:")){try{URL.revokeObjectURL(e.lastUrl)}catch(B){}e.lastUrl=null}i.remove()}catch(B){}}};v.set(n,u);s.onclick=e=>{e.stopPropagation();b({type:"stopAndClose",streamId:n}).then(e=>{if(!e||!e.ok)console.warn("stopAndClose failed",e)})["catch"](()=>{});try{i.remove()}catch(B){}const t=v.get(n);if(t&&t.lastUrl&&t.lastUrl.startsWith("blob:"))try{URL.revokeObjectURL(t.lastUrl)}catch(B){}v["delete"](n)};i.onclick=e=>{if(e.target===s)return;h({type:"focusStreamTab",streamId:n}).then(e=>{if(!e||!e.ok)console.warn("focusStreamTab failed",e)})["catch"](()=>{})};return u}function E(e,t,n,r,o,i,s){let c=v.get(e);if(!c)c=x(e,t||{});if(!c)return;const a=Number.isFinite(i)?Number(i):Date.now();if(c.lastTs&&a<c.lastTs)return;let l=null;let u=null;if(!n)return;if(typeof n==="string"&&n.startsWith("data:")){l=n}else if(n instanceof Blob){u=URL.createObjectURL(n);l=u}else if(ArrayBuffer.isView(n)||n instanceof ArrayBuffer){const h=new Blob([n],{type:"image/webp"});u=URL.createObjectURL(h);l=u}else if(n&&n.lastFrame){l=n.lastFrame}else{return}if(!l){if(u)try{URL.revokeObjectURL(u)}catch(B){}return}if(c.lastUrl===l&&c.lastTs===a){if(u)try{URL.revokeObjectURL(u)}catch(B){}return}const d=c.lastUrl&&c.lastUrl.startsWith("blob:")?c.lastUrl:null;const m=c.imgEl;if(!m){c.lastUrl=l;c.lastTs=a;return}m.style.transition="opacity .18s ease";m.style.opacity="0";const f=()=>{try{m.style.opacity="1";if(d){try{URL.revokeObjectURL(d)}catch(B){}}c.lastUrl=l;c.lastTs=a}finally{m.removeEventListener("load",f);m.removeEventListener("error",p)}};const p=()=>{try{if(u){try{URL.revokeObjectURL(u)}catch(B){}}m.style.opacity="1"}finally{m.removeEventListener("load",f);m.removeEventListener("error",p)}};window.__rem_registerListener(m,"load",f,false,"[MIRROR] img load","global");window.__rem_registerListener(m,"error",p,false,"[MIRROR] img error","global");m.src=l;if(t&&t.title&&c.titleEl){c.titleEl.innerHTML=Je(t.title||e)}}function ut(e){try{const t=m();const n=t.cardArea||t;if(!Array.isArray(e)||!n)return;const r=new Map;for(const o of Array.from(n.children)){const i=o.dataset?.streamId;if(i)r.set(i,o)}for(const i of e){const s=r.get(i);if(s)n.appendChild(s);r["delete"](i)}for(const s of r.values())n.appendChild(s)}catch(B){}}function dt(e){if(!Array.isArray(e))return;try{const t=m();for(const n of e){const r=v.get(n);if(r&&r.cardEl&&t){t.appendChild(r.cardEl)}}}catch(B){}}function mt(e){const t=v.get(e);if(!t)return;t.status&&(t.status.textContent="ended");setTimeout(()=>{try{if(t.lastUrl)try{URL.revokeObjectURL(t.lastUrl)}catch(B){}t.lastUrl=null;t.destroy()}catch(B){}v["delete"](e)},1e3)}async function ft(){try{const e=await h({type:"getAllStreams"});if(e&&e.ok&&e.streams){for(const[t,n]of e.streams){if(!v.has(t)){x(t,n.meta||{})}}}}catch(B){}}function pt(){if(!f){f=new BroadcastChannel(We)}return f}function ht(){const e=pt();e.onmessage=e=>{const t=e.data;if(!t||!t.type)return;if(t.type==="order"&&Array.isArray(t.order)){ut(t.order);return}if(t.type==="frame"){const{streamId:n,meta:r,buf:o,w:i,h:s,ts:c,frame:a}=t;if(!n||!o)return;E(n,r,o,i,s,c,a);return}if(t.type==="meta"){const{streamId:n,meta:r}=t;if(!n||!r)return;const l=v.get(n);if(l&&l.titleEl){l.titleEl.innerHTML=Je(r.title||n)}if(l)l.meta=r;return}if(t.type==="end"){mt(t.streamId);return}}}function yt(){(async()=>{try{const e=await b({type:"getActiveStreams"});if(!e||!e.ok)return;const t=e.streams||{};for(const n of Object.keys(t)){const r=t[n];x(n,r.meta||{});if(r.lastFrame)E(n,r.meta||{},r.lastFrame,null,null,r.ts||Date.now())}}catch(B){}})()}let wt=false;async function gt(){const e=".flex.flex-col.flex-1 > .relative.flex.flex-row:has(#pair-name-tooltip) .flex.flex-row.flex-1 > .flex.flex-row.flex-1 > .hidden";const t=e=>{if(document.getElementById(s))return;const n=document.createElement("div");n.className="rem-mirror-container";n.id=s;n.innerHTML=`<span class="contents"><button type="button" class="group rem-mirror-ui-btn" style="width:24px;height:24px;border-radius:4px;"><div style="display:flex;align-items:center;justify-content:center;width:16px;height:16px;"><i class="ri-cast-fill text-textSecondary"></i></div></button></span>`;n.title="Start chart mirroring";window.__rem_registerListener(n,"click",async e=>{e.stopPropagation();if(w){await lt();n.classList.remove("streaming");n.querySelector("button")?.removeAttribute("disabled");n.title="Start chart mirroring"}else{const t=await at();if(!t.ok){ct("Mirror failed or active elsewhere.")}else{n.classList.add("streaming");n.title="Stop chart mirroring"}}},false,"Mirror click","meme");st().then(e=>{if(e&&e.ok&&e.streamId){n.classList.add("streaming");n.querySelector("button")?.setAttribute("disabled","disabled");n.title="Chart is already mirrored"}});e.insertBefore(n,e.firstChild);window.__rem_registerComponent(n,"mirror btn","meme")};window.__rem_registerDOMWatcher(e,t,"meme")}window.addEventListener("beforeunload",()=>{try{f.close()}catch(B){}});function _t(){if(window.livekitClient)return window.livekitClient;if(window.LiveKit)return window.LiveKit;if(window.livekit)return window.livekit;return null}function bt(e){if(!e)return[];try{if(typeof e.getTrackPublications==="function")return e.getTrackPublications()||[]}catch(B){}const t=[];try{if(e.videoTracks&&typeof e.videoTracks.values==="function"){for(const n of e.videoTracks.values())t.push(n)}if(e.audioTracks&&typeof e.audioTracks.values==="function"){for(const r of e.audioTracks.values())t.push(r)}}catch(B){}try{if(e.tracks&&typeof e.tracks.forEach==="function")e.tracks.forEach(e=>t.push(e));if(e.trackPublications&&typeof e.trackPublications.forEach==="function")e.trackPublications.forEach(e=>t.push(e))}catch(B){}return t}function vt(){try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return null;window._pump_audio_ctx=window._pump_audio_ctx||new e;return window._pump_audio_ctx}catch(B){return null}}function xt(e){try{if(!e)return false;const t=window._pump_audio_ctx||(window._pump_audio_ctx=(window.AudioContext||window.webkitAudioContext)&&new(window.AudioContext||window.webkitAudioContext));if(!t)return false;const n=t.createMediaStreamSource(e);const r=t.createGain();r.gain.value=1;n.connect(r);r.connect(t.destination);window._pump_audio_gains=window._pump_audio_gains||[];window._pump_audio_gains.push(r);window._pump_audio_sources=window._pump_audio_sources||[];window._pump_audio_sources.push(n);return true}catch(B){return false}}function kt(){let e=document.getElementById("pump-playback-container");if(!e){e=document.createElement("div");e.id="pump-playback-container";Object.assign(e.style,{position:"relative",width:"100%",height:"100%",backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"})}else{e.innerHTML=""}return e}async function Et(e){try{const r=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);if(!r){if(e.requestFullscreen)await e.requestFullscreen();else if(e.webkitRequestFullscreen)await e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)await e.mozRequestFullScreen();else if(e.msRequestFullscreen)await e.msRequestFullscreen()}else{if(document.exitFullscreen)await document.exitFullscreen();else if(document.webkitExitFullscreen)await document.webkitExitFullscreen();else if(document.mozCancelFullScreen)await document.mozCancelFullScreen();else if(document.msExitFullscreen)await document.msExitFullscreen()}}catch(t){}finally{try{const o=e.classList&&e.classList.contains("pump-playback-container")?e:e.closest&&e.closest("#pump-playback-container")||document.getElementById("pump-playback-container");if(o){const i=o.querySelector(".pump-fs-btn");if(i){const s=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);i.innerHTML=s?"⤡":"⤢"}}}catch(n){}}}function Ct(e,a){if(!e||!a)return;a.classList.add("pump-playback");e.controls=false;e.setAttribute("data-controls-added","1");e.style.background="#000";e.style.display="block";e.style.width="100%";e.style.height="100%";e.playsInline=true;let r=a.querySelector(".pump-min-controls");if(!r){r=document.createElement("div");r.className="pump-min-controls";Object.assign(r.style,{position:"absolute",right:"8px",bottom:"8px",display:"flex",gap:"8px",alignItems:"center"});a.appendChild(r);window.__rem_registerComponent(r,"video controls wrapper","meme")}function t(e,t){const n=document.createElement("button");n.innerHTML=e;n.title=t||"";n.type="button";Object.assign(n.style,{background:"rgba(0,0,0,0.5)",border:"none",color:"#fff",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",cursor:"pointer",fontSize:"16px",pointerEvents:"auto"});n.onfocus=()=>n.style.outline="2px solid rgba(255,255,255,0.6)";n.onblur=()=>n.style.outline="none";return n}let l=a.querySelector(".pump-mute-btn");if(!l){l=t(e.muted?"🔇":"🔊");l.className="pump-mute-btn";const u=e=>{e.stopPropagation();try{const r=a||document.getElementById("pump-playback-container");const o=r?r.querySelector("video, audio"):null;const i=o?!!o.muted:false;const s=!i;if(r){const c=r.querySelectorAll("video, audio");c.forEach(e=>{try{e.muted=s}catch(t){}})}if(window._pump_audio_gains&&window._pump_audio_gains.length){window._pump_audio_gains.forEach(e=>{try{e.gain.value=s?0:1}catch(t){}})}try{l.innerHTML=s?"🔇":"🔊"}catch(t){}}catch(n){console.warn(n)}};window.__rem_registerListener(l,"click",u,false,"Mute button click","meme");r.appendChild(l)}else{l.innerHTML=e.muted?"🔇":"🔊";l.style.pointerEvents="auto"}let o=a.querySelector(".pump-fs-btn");if(!o){o=t("⤢");o.className="pump-fs-btn";const d=async e=>{e.stopPropagation();try{const n=a;if(!document.fullscreenElement){await(n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen());o.innerHTML="⤡";r.classList.add("show")}else{await(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());o.innerHTML="⤢";setTimeout(()=>r.classList.remove("show"),500)}}catch(t){}};window.__rem_registerListener(o,"click",d,false," [MEME] Fullscreen btn click","meme");r.appendChild(o)}else{const m=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);o.innerHTML=m?"⤡":"⤢";o.style.pointerEvents="auto"}let n=null;function i(e=3e3){try{r.classList.add("show");if(n)clearTimeout(n);n=setTimeout(()=>{r.classList.remove("show");n=null},e);window.__rem_registerTimeout(n,"[MEME] Livestream toggle controls","meme")}catch(B){}}function s(){try{const e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(e&&(e===a||a.contains(e))){r.classList.add("show")}else{setTimeout(()=>r.classList.remove("show"),500)}}catch(B){}}const c=e=>{i(3e3)};if(!a.__pump_controls_bound){window.__rem_registerListener(a,"touchstart",c,{passive:true},"Playback touchshow","meme");window.__rem_registerListener(document,"fullscreenchange",s,false,"fullscreenchange","meme");window.__rem_registerListener(document,"webkitfullscreenchange",s,false,"webkitfullscreenchange","meme");window.__rem_registerListener(document,"mozfullscreenchange",s,false,"mozfullscreenchange","meme");window.__rem_registerListener(document,"MSFullscreenChange",s,false,"MSFullscreenChange","meme");a.__pump_controls_bound=true}r.classList.remove("show")}function C(c,a,l,u){if(!c)return;try{let s;if(typeof c.attach==="function"){const t=c.kind==="video"?document.createElement("video"):document.createElement("audio");t.playsInline=true;t.autoplay=true;t.muted=!!!l;t.style.display="block";try{const r=c.attach(t);s=r||t;s.playsInline=true;s.autoplay=true;s.muted=!!!l}catch(e){try{s=c.attach()}catch(B){s=t}}}else{s=c.kind==="video"?document.createElement("video"):document.createElement("audio");if(c.mediaStream)s.srcObject=c.mediaStream}if(!s)return;s.controls=false;s.playsInline=true;if(c.kind==="video"){s.muted=!!!l;s.width=360;s.style.maxWidth="100%";s.style.display="block";const o=kt();o.appendChild(s);Ct(s,o);const i=e=>{try{e.stopPropagation();e.preventDefault();Et(o)}catch(t){}};if(!s.__pump_dbl_bound){window.__rem_registerListener(s,"dblclick",i,false,"Double click fullscreen","meme");s.__pump_dbl_bound=true}const d=s.muted;try{if(!l)s.muted=true;const m=s.play&&s.play();if(m&&typeof m.then==="function"){m["catch"](e=>{console.log("Livestream: play() rejected",e);try{if(!s.muted){s.muted=true;s.play&&s.play()["catch"](()=>{})}}catch(t){}})}}catch(B){}try{if(c&&c.kind==="video"&&s&&s.tagName==="VIDEO"){if(!s.__pump_health_interval){const f=1500;const p=3;let t=0;let i=0;const h=1e4;async function n(){const e=Date.now();if(e-i<h)return;i=e;try{if(c&&typeof c.detach==="function"){try{try{c.detach()}catch(t){}try{c.attach(s)}catch(t){}try{s.play&&s.play()["catch"](()=>{})}catch(t){}return}catch(B){}}}catch(B){}try{if(u){if(typeof u.setSubscribed==="function"){try{await u.setSubscribed(false);await new Promise(e=>setTimeout(e,200));await u.setSubscribed(true);return}catch(B){}}else if(typeof u.subscribe==="function"){try{const n=await u.subscribe();if(n){C(n,a,l,u);return}}catch(B){}}}}catch(B){}try{const r=window.__rem_pageToken;const o=window.__rem_wsUrl||undefined;await S();await new Promise(e=>setTimeout(e,500));if(r){try{await Ft(r,o,{value:!!l})}catch(B){}}}catch(B){}}const y=()=>{try{t=p}catch(e){}try{n()}catch(e){}};window.__rem_registerListener(s,"error",y,false,"Livestream: error","meme");window.__rem_registerListener(s,"stalled",y,false,"Livestream: stalled","meme");window.__rem_registerListener(s,"suspend",y,false,"Livestream: suspend","meme");window.__rem_registerListener(s,"emptied",y,false,"Livestream: emptied","meme");const w=setInterval(()=>{try{const e=!!(s&&s.videoWidth&&s.videoHeight&&s.readyState>=2);if(!e){t++}else{t=0}if(t>=p){t=0;n()}}catch(B){}},f);window.__rem_registerInterval(w,"[MEME] Livestream health check poll","meme");s.__pump_health_interval=w;s.__pump_health_listeners={onErrorOrStall:y};s.__pump_last_reattach=0}}}catch(B){}return}else{s.muted=!!!l;s.style.display="none";const o=kt();o.appendChild(s);let e=c.mediaStream||s.srcObject||null;if(!e&&typeof c.createStream==="function"){try{e=c.createStream()}catch(B){e=null}}if(e&&window._pump_audio_ctx){const g=xt(e);if(g)return}try{s.muted=!l?true:false;s.play&&s.play()["catch"](()=>{})}catch(B){}return}}catch(B){}}async function St(e,t,n){if(!e)return;try{if(e.track){C(e.track,t,n,e);return}if(typeof e.setSubscribed==="function"){try{await e.setSubscribed(true);if(e.track){C(e.track,t,n,e);return}}catch(B){}}if(typeof e.subscribe==="function"){try{const r=await e.subscribe();if(r){C(r,t,n,e);return}}catch(B){}}}catch(B){}}const Lt=new Map;function Tt(e,t){if(!e)return;const n=e.sid||e.identity||Math.random()+"";Lt.set(n,e);const r=bt(e);for(const o of r)St(o,e,t)}function Mt(e){if(!e)return;const t=e.sid||e.identity;Lt["delete"](t)}function At(e){const t=new Set;if(!e)return[];try{if(e.participants&&typeof e.participants.values==="function"){for(const n of e.participants.values())t.add(n)}}catch(B){}try{if(typeof e.getParticipants==="function"){const r=e.getParticipants();if(Array.isArray(r))r.forEach(e=>t.add(e))}}catch(B){}try{for(const o of Object.keys(e)){const i=e[o];if(!i)continue;if(Array.isArray(i)){for(const s of i)if(s&&(s.identity||s.sid))t.add(s)}else if(typeof i.values==="function"){try{for(const s of i.values())if(s&&(s.identity||s.sid))t.add(s)}catch(B){}}}}catch(B){}for(const n of Lt.values())t.add(n);return Array.from(t)}function qt(e,t){const n=At(e);for(const r of n)Tt(r,t)}function It(e,r){if(!e||typeof e.on!=="function")return;const t=e=>Tt(e,r.value);const n=e=>Mt(e);const o=(e,t)=>St(e,t,r.value);const i=(e,t,n)=>C(e,n,r.value,t);e.on("participantConnected",t);try{window.__rem_registerResource("meme",{type:"livekit-listener",instance:e,event:"participantConnected",handler:t,description:"LiveKit participantConnected"})}catch(B){}e.on("participantDisconnected",n);try{window.__rem_registerResource("meme",{type:"livekit-listener",instance:e,event:"participantDisconnected",handler:n,description:"LiveKit participantDisconnected"})}catch(B){}e.on("trackPublished",o);try{window.__rem_registerResource("meme",{type:"livekit-listener",instance:e,event:"trackPublished",handler:o,description:"LiveKit trackPublished"})}catch(B){}e.on("trackSubscribed",i);try{window.__rem_registerResource("meme",{type:"livekit-listener",instance:e,event:"trackSubscribed",handler:i,description:"LiveKit trackSubscribed"})}catch(B){}}async function Ft(e,t="wss://pump-prod-tg2x8veh.livekit.cloud",a={value:false}){if(!e)return null;const n=_t();if(!n)return null;async function r(e,t=3e3){const n=Date.now();while(Date.now()-n<t){try{const r=At(e);for(const o of r){const i=bt(o);for(const s of i){const c=s.track?.kind||s.kind||s.trackKind;if(c==="video"||s.track&&s.track.kind==="video"){try{await St(s,o,a.value)}catch(B){}if(document.getElementById("pump-playback-container")?.querySelector("video"))return true}}}}catch(B){}await new Promise(e=>setTimeout(e,200))}return false}let o=null;try{if(n.Room){try{const i=n.Room;o=new i;if(typeof o.connect==="function"){await o.connect(t,e)}else if(typeof n.connect==="function"){o=await n.connect(t,e)}}catch(B){o=null}}}catch(B){}if(!o&&typeof n.connect==="function"){try{o=await n.connect(t,e)}catch(B){o=null}}if(!o&&typeof window.connect==="function"){try{o=await window.connect(t,e)}catch(B){o=null}}if(!o)return null;It(o,a);qt(o,a.value);try{await r(o,3e3)}catch(B){}window._pump_room=o;window.__rem_registerResource("meme",{type:"livekit",instance:o,description:"LiveKit room"});return o}function Pt(r,e=8e3){return new Promise(t=>{let n=false;(async()=>{const e=await b({type:"fetch-thumbnail",mintId:r});if(n)return;n=true;if(e&&e.ok)t(e.data);else t(null)})();setTimeout(()=>{if(!n){n=true;t(null)}},e)})}function Nt(e,o=1e4){return new Promise(t=>{let n=false;function r(e){if(e&&e.type==="token"){chrome.runtime.onMessage.removeListener(r);n=true;if(e.token)t({ok:true,token:e.token,wsUrl:e.wsUrl});else t({ok:false,error:e.error||"No token"})}}chrome.runtime.onMessage.addListener(r);b({type:"fetchTokenForMint",mintId:e});setTimeout(()=>{if(!n){chrome.runtime.onMessage.removeListener(r);t({ok:false,error:"Timeout"})}},o)})}function Ot(){try{const e=window.AudioContext||window.webkitAudioContext;if(e){window._pump_audio_ctx=window._pump_audio_ctx||new e;window._pump_audio_ctx.resume&&window._pump_audio_ctx.resume()["catch"](()=>{})}}catch(B){}}async function S(e){try{try{const o=window._pump_room;if(o){if(typeof o.disconnect==="function"){try{await o.disconnect()["catch"](()=>{})}catch(B){}}if(typeof o.leave==="function"){try{await o.leave()["catch"](()=>{})}catch(B){}}window._pump_room=null}}catch(B){console.log("Livestream: error disconnecting room",B)}const n=document.getElementById("pump-playback-container");if(n){try{const i=n.querySelectorAll("video, audio");i.forEach(e=>{try{if(typeof e.pause==="function")e.pause();try{e.srcObject=null}catch(t){}try{e.removeAttribute&&e.removeAttribute("src")}catch(t){}try{if(typeof e.load==="function")e.load()}catch(t){}}catch(n){}try{if(e.__pump_health_interval){try{clearInterval(e.__pump_health_interval)}catch(t){}e.__pump_health_interval=null}if(e.__pump_health_listeners&&e.__pump_health_listeners.onErrorOrStall){try{e.removeEventListener("error",e.__pump_health_listeners.onErrorOrStall);e.removeEventListener("stalled",e.__pump_health_listeners.onErrorOrStall);e.removeEventListener("suspend",e.__pump_health_listeners.onErrorOrStall);e.removeEventListener("emptied",e.__pump_health_listeners.onErrorOrStall)}catch(t){}e.__pump_health_listeners=null}}catch(B){}})}catch(B){}}if(n&&n.parentNode){n.parentNode.removeChild(n)}const r=document.getElementById("pump-thumb-wrapper");if(r){try{r.innerHTML="";const s=document.createElement("div");s.style.width="100%";s.style.height="100%";s.style.background="#000";r.appendChild(s)}catch(B){}}try{if(Array.isArray(window._pump_audio_gains)){window._pump_audio_gains.forEach(e=>{try{e.disconnect&&e.disconnect()}catch(t){}});window._pump_audio_gains=[]}if(Array.isArray(window._pump_audio_sources)){window._pump_audio_sources.forEach(e=>{try{e.disconnect&&e.disconnect()}catch(t){}});window._pump_audio_sources=[]}}catch(B){}try{if(window._pump_audio_ctx){try{window._pump_audio_ctx.close&&await window._pump_audio_ctx.close()["catch"](()=>{})}catch(B){}window._pump_audio_ctx=null}}catch(B){}}catch(t){console.warn("cleanupPlayback error",t)}}let Rt=false;async function Dt(){const g=window.__rem_pageToken;function _(){return g!==window.__rem_pageToken}if(_())return;const e="#"+N;const t=async e=>{if(document.getElementById("pump-video-container"))return;if(Rt)return;if(_())return;Rt=true;try{const m=document.createElement("div");m.id="pump-video-container";m.className="flex flex-col border-primaryStroke border-b rounded-lg overflow-hidden";window.__rem_registerComponent(m,"Video container","meme");function t(){try{m.classList.add("pump-video-hidden")}catch(B){}}function l(){try{m.classList.remove("pump-video-hidden")}catch(B){}}function u(){const e=document.querySelector('#pair-name-tooltip a[href^="https://pump.fun/coin/"]:has(i.icon-pill.text-\\[\\#86EFAC\\])');if(e){const t=e.href;return t.split("/coin/")[1]}return false}async function d(e){const t=await b({type:"fetch-thumbnail",mintId:e});if(!t.ok){throw new Error(t.error||"Failed to fetch thumbnail")}return t.data}const s=document.createElement("div");s.className="pump-toggle-header";s.style.position="relative";s.innerHTML=`
        <div class="flex flex-row pl-[8px] px-[16px] pt-[4px] gap-[16px] h-[36px]">
            <button class="group/dropdown w-fit flex flex-row hover:bg-primaryStroke/50 text-textSecondary text-[14px] font-medium h-[28px] pl-[8px] pr-[4px] justify-start items-center rounded-[4px] transition-all duration-125 ease-in-out">
            <span class="flex group-hover/dropdown:text-textPrimary transition-all duration-125 ease-in-out items-center gap-1 tracking-[-0.02em]">Livestream</span>
            </button>
        </div>`;const c=document.createElement("button");c.innerHTML="↻";c.className="pump-retry-btn";c.style.cssText="position:absolute; right:8px; top:8px; width:32px; height:32px; background:transparent; border:none; color:#9ca3af; cursor:pointer; display:flex; align-items:center; justify-content:center; border-radius:6px;";c.onmouseenter=()=>c.style.color="#fff";c.onmouseleave=()=>c.style.color="#9ca3af";window.__rem_registerListener(c,"click",e=>{e.stopPropagation();if(c.getAttribute("data-busy")==="1")return;c.setAttribute("data-busy","1");c.style.transform="rotate(20deg)";setTimeout(()=>{c.style.transform=""},160);S()["catch"](()=>{});const t=u();(async()=>{try{await b({type:"forceFetchToken",mintId:t})}catch(e){}finally{c.removeAttribute("data-busy")}})()},false,"Retry click","meme");s.appendChild(c);const a=document.createElement("div");a.style.cssText="position:relative; padding:0 16px 12px 16px;";const f=document.createElement("div");f.id="pump-thumb-wrapper";f.style.cssText="position:relative; width:100%; aspect-ratio:16/9; background:#000;";const p=document.createElement("div");p.id="pump-thumb-placeholder";p.style.cssText="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#6b7280; font-size:13px;";f.appendChild(p);const h=document.createElement("div");h.id="pump-thumbnail-spinner";h.style.cssText=`position: absolute; right: 8px; top: 8px; width: 12px; height: 12px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.6); border-top-color: transparent; display: none; box-sizing: border-box;`;try{h.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:800,iterations:Infinity})}catch(B){}f.appendChild(h);const y=document.createElement("div");y.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="white" viewBox="0 0 24 24"><path d="M3 22v-20l18 10-18 10z"/></svg>`;y.style.cssText=`position:absolute; top:0; left:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); cursor:pointer; z-index:10; transition: background 0.2s ease; pointer-events: auto;`;y.onmouseenter=()=>y.style.background="rgba(0,0,0,0.65)";y.onmouseleave=()=>y.style.background="rgba(0,0,0,0.45)";async function n(e){function t(){return g!==window.__rem_pageToken}const n=e||u();if(!n||t())return;if(window._pump_connecting)return;await S(n);if(h)h.style.display="block";let r=null;try{r=await Nt(n)}catch(o){r=null}finally{if(h)h.style.display="none"}if(t())return;if(r&&r.token){await i(r.token,r.wsUrl);return}try{b({type:"forceFetchToken",mintId:n})["catch"](()=>{})}catch(B){}}async function i(e,t){if(!e||window._pump_connecting)return;window._pump_connecting=true;try{try{await S()["catch"](()=>{})}catch(n){}const o=kt();if(f){f.innerHTML="";f.appendChild(o)}Ot();await Ft(e,t||undefined,{value:true})}catch(r){}finally{window._pump_connecting=false}}window.__rem_registerListener(y,"click",async e=>{e.preventDefault();e.stopPropagation();if(window._pump_connecting)return;if(y.getAttribute("data-activated")==="1")return;y.setAttribute("data-activated","1");try{const t=u();if(t)await n(t)}finally{if(!document.getElementById("pump-playback-container"))y.removeAttribute("data-activated")}},false,"Overlay click","meme");f.appendChild(y);a.appendChild(f);m.appendChild(s);m.appendChild(a);if(e.parentNode){e.parentNode.insertBefore(m,e)}function r(e){if(!e||e.type!=="token")return;const t=u();if(e.mintId&&t&&e.mintId!==t)return;try{c.removeAttribute("data-busy")}catch(B){}c.style.transform="scale(1.08)";setTimeout(()=>{c.style.transform=""},200);window.dispatchEvent(new CustomEvent("pumpTokenUpdated",{detail:{token:e.token,mintId:e.mintId||t,wsUrl:e.wsUrl||null}}));if(e.token){l();(async()=>{try{await i(e.token,e.wsUrl)}catch(B){}})()}}if(!m.__pump_token_handler){m.__pump_token_handler=r;chrome.runtime.onMessage.addListener(r);window.__rem_registerResource("meme",{type:"runtime-listener",handler:r,description:"Pump token msg"})}const w=u();if(!w)t();else l();(function o(){let s=0;const t=12;const n=250;let c=null;function a(){return g!==window.__rem_pageToken}async function r(){if(a()){clearInterval(c);return false}s++;try{const n=u();if(!n)return false;if(a())return false;if(h)h.style.display="block";let e;try{e=await d(n)}catch(t){return false}finally{if(h)h.style.display="none"}try{f.innerHTML="";const r=document.createElement("img");const o=chrome.runtime.getURL("img/pump.jpg");r.src=e&&e.thumbnail?e.thumbnail:o;r.style.cssText="width:100%; height:100%; object-fit:cover;";const i=()=>{try{if(r.src!==o)r.src=o}catch(B){}};window.__rem_registerListener(r,"error",i,false,"img err","meme");f.appendChild(r)}catch(B){}if(a())return false;l();try{f.appendChild(y);y.style.cursor="pointer"}catch(B){}return true}catch(B){if(h)h.style.display="none";return false}}(async()=>{const e=await r();if(e)return;c=setInterval(async()=>{if(s>=t){clearInterval(c);c=null;m.__pump_retry_interval=null;return}const e=await r();if(e){if(c){clearInterval(c);c=null}}},n);window.__rem_registerInterval(c,"[MEME] Thumbnail retry poll","meme");m.__pump_retry_interval=c})()})()}catch(B){console.warn(B)}finally{Rt=false}};window.__rem_registerDOMWatcher(e,t,"meme")}function Bt(){const s='.flex.flex-row.flex-1.px-\\[16px\\][class*="max-h-\\[48px\\]"]';const l='div[style*="position: absolute"] > div > div:last-child a span.text-textTertiary:first-child';const n=".absolute.inset-0.overflow-y-auto:has(.bg-transparent), .absolute.inset-0.overflow-y-auto:has(.bg-primaryStroke\\/20)";function c(){try{return window.localStorage.getItem("activeTab")==='"holders"'}catch(B){return false}}const u=e=>{if(!e)return NaN;let t=e.replace(/,/g,"").trim().toLowerCase();const n=t.match(/^([\d.]+)([kmb]?)/);if(!n)return NaN;const r=parseFloat(n[1]);const o=n[2];const i={k:1e3,m:1e6,b:1e9};return r*(i[o]||1)};const d=e=>{const t=parseFloat(e)||0;if(typeof e!=="string")return Infinity;if(e.endsWith("m"))return t/(24*60);if(e.endsWith("h"))return t/24;if(e.endsWith("d"))return t;if(e.endsWith("mo"))return t*30;if(e.endsWith("y"))return t*365;return Infinity};const m=(e,t)=>{if(e.dataset.remColorType==="age"){e.style.color="";e.style.opacity="";delete e.dataset.remColorType}if(t<14){e.style.color="rgb(var(--primary-red) / var(--tw-text-opacity, 1))";e.style.opacity="0.97";e.dataset.remColorType="age"}else if(t<25){e.style.color="rgb(var(--primary-orange) / var(--tw-text-opacity, 1))";e.style.opacity="0.97";e.dataset.remColorType="age"}};const f=(e,t)=>{e.classList.remove(...[...e.classList].filter(e=>e.startsWith("rem-balance-")));if(t<=1.75)e.classList.add("rem-balance-1");else if(t<=5)e.classList.add("rem-balance-2");else if(t<=25)e.classList.add("rem-balance-3");else if(t<=100)e.classList.add("rem-balance-4");else e.classList.add("rem-balance-5")};const p=(e,t)=>{e.classList.remove(...[...e.classList].filter(e=>e.startsWith("rem-percentage-")));if(t<.25)e.classList.add("rem-percentage-0");else if(t<=2)e.classList.add("rem-percentage-1");else if(t<=2.5)e.classList.add("rem-percentage-2");else if(t<=3.25)e.classList.add("rem-percentage-3");else if(t<=4)e.classList.add("rem-percentage-4");else if(t>4)e.classList.add("rem-percentage-5")};const a=e=>{const t=e.querySelectorAll(".flex.flex-row.flex-1.justify-start.items-center")[1];if(t){const i=u(t.textContent);if(!isNaN(i))f(t,i)}const n=e.querySelector(".flex.flex-col.flex-1.justify-center.items-start");const r=n?.querySelector(".bg-secondaryStroke\\/50.flex.flex-row > span");if(n&&r){const s=parseFloat(r.textContent.replace("%","").trim());if(!isNaN(s))p(n,s)}const o=e.querySelector(l);if(o){const c=o.textContent.trim();const a=d(c);m(o,a)}};const h=Y(()=>{if(!c())return;const e=document.querySelector(n);if(!e)return;const t=e.querySelectorAll(l);if(t.length===0)return;const r=new Map;t.forEach(e=>{const t=e.textContent.trim();r.set(t,(r.get(t)||0)+1)});t.forEach(e=>{const t=e.textContent.trim();const n=r.get(t);if(e.dataset.remColorType==="age")return;if(n&&n>6){e.style.color="rgb(var(--primary-yellow) / var(--tw-text-opacity, 1))";e.dataset.remColorType="freq"}else{if(e.dataset.remColorType==="freq"){e.style.color="";delete e.dataset.remColorType}}})},250);const e=n=>{let r=false;const o=new MutationObserver(e=>{let r=false;e.forEach(e=>{if(e.type==="characterData"||e.type==="childList"){const t=e.target.nodeType===1?e.target:e.target.parentElement;const n=t.closest(s);if(n){a(n);r=true}}});if(r)h()});const i=setInterval(()=>{if(!n.isConnected){clearInterval(i);o.disconnect();return}const e=c();if(e&&!r){const t=n.querySelectorAll(s);t.forEach(a);h();o.observe(n,{childList:true,subtree:true,characterData:true});r=true}else if(!e&&r){o.disconnect();r=false}},500);window.__rem_registerObserver(o,"Holders Observer","meme");window.__rem_registerInterval(i,"Holders Toggle Poll","meme")};window.__rem_registerDOMWatcher(n,e,"meme")}const L=new WeakMap;const T=new Set;const jt=new WeakMap;const Wt=new WeakMap;const Ut=new WeakMap;let Ht=false;const $t=".relative.z-20 > .contents:nth-child(2) > .flex.flex-row.gap-\\[4px\\].items-center .text-\\[12px\\].font-medium";const zt=".relative.z-20 > .contents:nth-child(2) > .flex.flex-row.gap-\\[4px\\].items-end span";const Kt=new WeakMap;function Vt(e){if(!e||!e.querySelector)return;const t=L.get(e);if(t&&t!=="inflight"){if(!e.classList.contains(t)){l(e);e.classList.add(t);e.dataset.remMcApplied=t}return t}const n=tn(e);if(n){L.set(e,n);l(e);e.classList.add(n);e.dataset.remMcApplied=n;return n}if(L.get(e)==="inflight")L["delete"](e);return null}function Qt(e){if(!e)return"";try{return(e.textContent||"").replace(/\s+/g," ").trim()}catch(B){return""}}function Jt(e){if(!e)return false;const t=e.toString().trim().toUpperCase();return!!t.match(/^\s*(?:\$)?\s*[\d,.]+(?:\s*(?:K|M|B|BN))?\s*$/)}function Zt(e){if(!e)return 0;const t=e.toUpperCase().trim();const n=t.replace(/[^0-9.,KMBN]/g,"").trim();const r=n.match(/[\d,.]+/);if(!r)return 0;const o=r[0].replace(/,/g,"");const i=parseFloat(o)||0;let s=1;if(n.includes("BN")||/[^A-Z]B[^A-Z]/.test(" "+n+" ")||n.endsWith("B"))s=1e9;else if(n.includes("M"))s=1e6;else if(n.includes("K"))s=1e3;return i*s}function l(e){const t=e.dataset.remMcApplied;if(t){e.classList.remove(t);e.dataset.remMcApplied="";return}for(const n of Array.from(e.classList)){if(n.startsWith("rem-mc-"))e.classList.remove(n)}}function Gt(e){if(!e)return;const t=L.get(e);const n=tn(e);if(n){if(t!==n){L.set(e,n);l(e);e.classList.add(n);e.dataset.remMcApplied=n}else if(!e.classList.contains(n)){l(e);e.classList.add(n);e.dataset.remMcApplied=n}}else if(t&&t!=="inflight"){if(!e.classList.contains(t)){l(e);e.classList.add(t);e.dataset.remMcApplied=t}}else if(L.get(e)!=="inflight"){L.set(e,"inflight");T.add(e);Xt()}}function Xt(){if(Ht)return;Ht=true;const t=e=>{Ht=false;const t=Array.from(T);T.clear();const n=12;for(let e=0;e<t.length;e+=n){const a=t.slice(e,e+n);requestAnimationFrame(()=>{const e=[];for(const t of a){try{const n=jt.get(t);if(n){const o=n.textContent?.trim()||"";const i=Wt.get(t)||"";if(o===i){const s=L.get(t);if(s&&s!=="inflight"){e.push({card:t,cls:s,fromCache:true});continue}}else{Wt.set(t,o)}}const r=tn(t);e.push({card:t,cls:r,fromCache:false})}catch(B){}}for(const c of e){try{if(c.cls){L.set(c.card,c.cls);l(c.card);c.card.classList.add(c.cls);c.card.dataset.remMcApplied=c.cls}else{Vt(c.card)}}catch(B){}}})}};if(typeof requestIdleCallback==="function"){try{requestIdleCallback(e=>t(e),{timeout:100})}catch(B){setTimeout(()=>t(),25)}}else{setTimeout(()=>t(),25)}}const Yt=new WeakMap;function en(e){if(!e)return null;if(e.__rem_mc_el&&e.contains(e.__rem_mc_el)){return e.__rem_mc_el}let t=null;const n=t=>{const e=t.nextElementSibling;if(e&&Jt(Qt(e))){return e}const n=t.parentElement;if(n){const r=n.children;for(let e=0;e<r.length;e++){if(r[e]===t){const o=r[e+1];if(o&&Jt(Qt(o))){return o}break}}}return null};const r=e.querySelectorAll(`${$t}, ${zt}`);for(let e=0;e<r.length;e++){const o=r[e];if((o.textContent||"").trim().toUpperCase()==="MC"){t=n(o);if(t)break}}if(!t){const i=e.querySelectorAll(".relative.z-20 span, .relative.z-20 div, span.text-\\[12px\\]");for(let e=0;e<i.length;e++){const o=i[e];if((o.textContent||"").trim().toUpperCase()==="MC"){t=n(o);if(t)break}}}if(t){const s=t.nodeType===3?t.parentElement:t;e.__rem_mc_el=s;return s}return null}function tn(n){try{if(!n||!n.querySelector)return null;const r=Ut.get(n);if(r===false){return null}let e=jt.get(n)||null;if(!e){const s=en(n);if(s){e=s.nodeType===3?s.parentElement:s;jt.set(n,e)}}if(!e){Ut.set(n,false);return null}Ut.set(n,true);const o=Qt(e)||"";if(!o){return null}const i=Zt(o);let t="";if(i<=8e3)t="rem-mc-1";else if(i<=14e3)t="rem-mc-2";else if(i<=18e3)t="rem-mc-3";else if(i<=24e3)t="rem-mc-4";else if(i<=3e4)t="rem-mc-5";else if(i<=5e4)t="rem-mc-6";else if(i<=75e3)t="rem-mc-7";else if(i<=1e5)t="rem-mc-8";else if(i<=125e3)t="rem-mc-9";else if(i<=15e4)t="rem-mc-10";else if(i<=2e5)t="rem-mc-11";else if(i<=275e3)t="rem-mc-12";else if(i<=4e5)t="rem-mc-13";else if(i<=55e4)t="rem-mc-14";else if(i<=1e6)t="rem-mc-15";else t="rem-mc-16";return t}catch(B){return null}}const M=new WeakMap;function nn(e){try{const t=e.querySelector(".rem-price-chart");if(t){const n=M.get(t);if(n){try{if(n.remove&&typeof n.remove==="function"){n.remove()}}catch(B){}M["delete"](t)}t._chart=null;t._series=null;t._retryCount=0;t._renderFailures=0}}catch(B){console.warn("cleanupCardChart failed",B)}}const rn=45*1e3;const on=[10,30,45].map(e=>e*1e3);const sn=300;const cn=5;const an=5;const A=new Map;const ln=new Set(["sol-pump-grad","sol-grad","bsc-grad","bas-grad","mon-grad"]);let q=false;const un=new WeakMap;const dn=new Set;const mn=new WeakSet;const I=new Set;const F=new Map;const P=new Map;let R={};function fn(e,t){try{const n=D(e);if(!n){return false}const r=_n(t)||"unknown";const o=ln.has(r)?an:cn;const i=Math.floor(Date.now()/1e3)-n;const s=i<o;return s}catch(B){return false}}function pn(e,t){const n=Math.floor(Date.now()/1e3)-e;if(n<4*60)return"1s";if(n<30*60)return"15s";if(n<60*60)return"30s";if(n<120*60)return"1m";if(n<24e3*60)return"5m";return"1s"}const hn=/^\d{1,2}[smhd]$/i;function D(e){if(!e||!e.querySelectorAll)return null;const t=Array.from(e.querySelectorAll("span"));for(const n of t){const r=(n.textContent||"").trim();if(hn.test(r)){const o=parseInt(r,10);const i=r.slice(-1).toLowerCase();let e=0;if(i==="s")e=o;else if(i==="m")e=o*60;else if(i==="h")e=o*3600;else if(i==="d")e=o*86400;const s=Math.floor(Date.now()/1e3);return s-e}}return null}function yn(e){if(!e)return null;try{const t=e.querySelectorAll('img[src*=".com/"]');for(const n of t){const r=n.getAttribute("src");const o=r?.match(/\.com\/([^/?]+)\.webp/);if(o&&o[1]){const i=o[1];if(i.length>8&&/[A-Za-z]/.test(i)){return i}}}}catch(B){}try{const s=e.querySelector('a[href^="https://x.com/search?q="]:has(.ri-search-line)');if(s){const c=new URL(s.href);const a=c.searchParams.get("q");if(a){return a}}}catch(B){}return null}function wn(e){if(Object.prototype.hasOwnProperty.call(e.dataset,"remTokenId")){return e.dataset.remTokenId||null}const t=yn(e);try{e.dataset.remTokenId=t||""}catch(B){}return t}const gn={"sol-pump-new":["pump.svg","mayhem.svg","pump-amm-temp.svg"],"sol-pump-grad":["pump-grad-amm-temp.svg","mayhem-grad.svg"],"sol-bonk-new":["bonk.svg","bonkers.svg"],"sol-bonk-grad":["bonk-grad.svg"],"sol-new":["bags.svg","boop.svg","daosfun.svg","heaven.svg","jupstudio.svg","launch-a-coin.svg","moonit.svg","soar.svg","sugar","virtual-curve.svg"],"sol-grad":["bags-grad.svg","boop-grad.svg","daosfun-grad.svg","heaven-grad.svg","jupstudio-grad.svg","launch-a-coin-grad.svg","moonit-grad-meteora.svg","moonshot-new.svg","soar-grad.svg","sugar-grad","virtual-curve-grad.svg"],"sol-raydium":["launchlab.svg","launchlab-grad.svg","moonit-grad-ray.svg","ray-cpmm.svg","ray.svg"],"bsc-new":["fourmeme.svg","binance.svg"],"bsc-grad":["fourmeme-grad.svg","binance-grad.svg"]};function _n(e){if(!e)return"unknown";e=e.split("?")[0];for(const[t,n]of Object.entries(gn)){if(n.includes(e))return t}return"unknown"}function bn(e){const t=e.querySelector(j)||null;const n=(t?.getAttribute?.("src")||"").split("/").pop()||"";return{svgImg:t,svgFilename:n}}async function vn(t,n,r,e){if(e==="bsc"){try{const o=await b({type:"bsc_fetchDateAndLp",platform:n,tokenId:r});if(!o||!o.ok){const c=D(t)||null;return{createdAt:c,lpAddress:null}}const i=o.createdAt??null;let e=null;if(i!=null){const a=Number(i);if(Number.isFinite(a)){e=a>1e12?Math.floor(a/1e3):Math.floor(a)}}const s=o.lpAddress??null;return{createdAt:e,lpAddress:s}}catch(B){return{createdAt:D(t)||null,lpAddress:null}}}else{try{const o=await b({type:"sol_fetchDateAndLp",platform:n,tokenId:r});if(!o||!o.ok){const c=D(t)||null;return{createdAt:c,lpAddress:null}}const i=o.createdAt??null;let e=null;if(i!=null){const a=Number(i);if(Number.isFinite(a)){e=a>1e12?Math.floor(a/1e3):Math.floor(a)}}const s=o.lpAddress??null;return{createdAt:e,lpAddress:s}}catch(B){return{createdAt:D(t)||null,lpAddress:null}}}}function xn(e,t){if(!e?.length||!t?.length)return false;const n=e[e.length-1];const r=t[t.length-1];return n.time===r.time&&n.open===r.open&&n.high===r.high&&n.low===r.low&&n.close===r.close}function kn(e){try{const t=F.get(e);if(t){if(t.observer&&typeof t.observer.disconnect==="function"){try{t.observer.disconnect()}catch(B){}}if(t.scrollTarget&&t.scrollHandler){try{t.scrollTarget.removeEventListener("scroll",t.scrollHandler)}catch(B){}}F["delete"](e)}}catch(B){}dn.clear();I["delete"](e)}function En(n){if(I.has(n)){const i=F.get(n);if(i&&i.scrollTarget&&!document.body.contains(i.scrollTarget)){kn(n)}else{return}}const e=document.querySelector(n);if(!e)return;const r=e=>{dn.add(e);Un.observe(e);mn.add(e)};const t=new MutationObserver(e=>{for(const t of e){if(t.addedNodes.length){t.addedNodes.forEach(e=>{if(e.nodeType===1){if(e.matches&&e.matches(k)){r(e)}else if(e.querySelectorAll){const t=e.querySelectorAll(k);t.forEach(r)}}})}if(t.removedNodes.length){t.removedNodes.forEach(e=>{if(e.nodeType===1){if(e.matches&&e.matches(k)){dn["delete"](e);Cn(e)}else if(e.querySelectorAll){const t=e.querySelectorAll(k);t.forEach(e=>{dn["delete"](e);Cn(e)})}}})}}Vn(n)});t.observe(e,{childList:true,subtree:true});window.__rem_registerObserver(t,`[PULSE] Coin observer ${n}`,"pulse");e.querySelectorAll(k).forEach(r);const o=()=>Jn(n);window.__rem_registerListener(e,"scroll",o,{passive:true},"[PULSE] scroll handler","pulse");F.set(n,{observer:t,scrollHandler:o,scrollTarget:e});I.add(n);Vn(n)}function Cn(e){try{nn(e);try{L["delete"](e);if(e.dataset&&e.dataset.remMcApplied){try{e.classList.remove(e.dataset.remMcApplied)}catch(B){}e.dataset.remMcApplied=""}}catch(B){}try{T["delete"](e)}catch(B){}try{jn["delete"](e)}catch(B){}try{Bn["delete"](e)}catch(B){}try{mn["delete"](e)}catch(B){}try{const t=e?.dataset?.remTokenId||null;if(t)A["delete"](t)}catch(B){}}catch(B){console.warn("cleanupCardObservers failed",B)}}const Sn=new Set;function Ln(x){if(q)return;q=true;requestAnimationFrame(()=>{try{const t=Date.now();const n=document.querySelector(x);if(!n){q=false;return}const r=n.querySelectorAll(k);for(const o of r){const i=Bn.get(o);const s=typeof i==="boolean"?i:$n(o,.25);if(!mn.has(o)){try{Un.observe(o);mn.add(o)}catch(B){}}if(!s)continue;const c=wn(o);const a=o.querySelector(j);const l=a?(a.getAttribute("src")||"").split("/").pop():"";const u=_n(l)||"unknown";const d=ln.has(u);const m=window.__rem_chartsForAll||d;const f=!!window.__rem_marketCapColorsEnabled;const p=!!window.__rem_twitterPreview;const h=!!window.__rem_bigTwitterLinks;if(m){requestAnimationFrame(()=>{try{Tn(o,l)}catch(B){}})}if(f){requestAnimationFrame(()=>{try{Gt(o)}catch(B){}})}if(h){requestAnimationFrame(()=>{try{wr(o,24)}catch(B){}})}if(p){requestAnimationFrame(()=>{try{const e=mr(o);if(e&&e.dataset)e.dataset.__rem_nitterAttached="1"}catch(B){}})}if(!c)continue;const y=A.get(c);const w=!y||t-(y.lastProcessed||0)>=rn;if(!w)continue;const g=D(o)||null;if(!g)continue;const _=Math.floor(Date.now()/1e3)-g;const b=ln.has(u)?an:cn;if(_<b)continue;const v=A.get(c);A.set(c,{element:o,lastProcessed:v?v.lastProcessed:0,data:v?v.data:undefined,createdAt:g})}}catch(e){console.error("processVisibleCards error",e)}finally{q=false}})}async function Tn(e,t){if(un.get(e))return;un.set(e,true);try{await Mn(e,t)}catch(n){nn(e)}finally{un["delete"](e)}}async function Mn(e,t){try{const u=t||bn&&bn(e).svgFilename||"";const d=_n(u);const m=ln.has(d);if(!window.__rem_chartsForAll&&!m)return}catch(B){}if(!Hn(e))return;if(!t)t=bn(e).svgFilename;if(fn(e,t))return;const n=wn(e);if(!n)return;let r=e.querySelector(".rem-price-chart");if(!r){r=document.createElement("div");r.className="rem-price-chart";e.prepend(r)}const o=Date.now();const i=R[n];const s=!i||!i.data||o-i.timestamp>=rn;let c;if(!s&&i.data){c=i.data}else if(i?.failed){An(r,i,n);return}else{const f=await qn(e,n,t);if(!f?.data?.length)return;c=f.data}const a=A.get(n);const l=xn(a?.data,c);if(l&&Hn(e)){zn(r,c,n);if(a)a.lastProcessed=o}else{A.set(n,{element:e,lastProcessed:o,data:c});zn(r,c,n)}if(window.__rem_marketCapColorsEnabled){Gt(e)}}function An(e,t,n){const r=Date.now();const o=typeof t?.failed==="number"?t.failed:1;if(o>on.length){e.innerHTML="";return}const i=on[Math.max(0,o-1)];if(r-(t?.timestamp||0)>=i){qn(e.parentElement,n)["catch"](e=>console.warn("retry failed",e))}}async function qn(a,l,u){if(P.has(l)){return P.get(l)}const e=(async()=>{if(!u){const n=a.querySelector(j);u=(n?.getAttribute?.("src")||"").split("/").pop()||""}const e=a.querySelector(".rem-price-chart");if(!e)return null;try{const i=_n(u)||"unknown";let e=false;let t=D(a);let n=null;let r=null;if(i.startsWith("sol"))r="sol";if(i.startsWith("bsc"))r="bsc";if(i.startsWith("bas"))r="bas";if(i.startsWith("mon"))r="mon";if(i&&i.includes("grad")){const c=await vn(a,i,l,r);t=c?.createdAt||t;n=c?.lpAddress||null;e=true}const s=pn(t,i);let o=null;if(r==="sol"){o=await b({type:"sol_fetchOHLC",platform:i,tokenId:l,interval:s,lpAddress:n,forceRefresh:e})}else if(r==="bsc"){o=await b({type:"bsc_fetchOHLC",platform:i,tokenId:l,interval:s,lpAddress:n,forceRefresh:e})}else if(r==="bas"){o=await b({type:"bas_fetchOHLC",platform:i,tokenId:l,interval:s,lpAddress:n,forceRefresh:e})}else if(r==="mon"){o=await b({type:"mon_fetchOHLC",platform:i,tokenId:l,interval:s,lpAddress:n,forceRefresh:e})}if(!o?.ok||!Array.isArray(o.data)||o.data.length===0){return null}R[l]=R[l]||{};R[l].data=o.data;R[l].lpAddress=o.lpAddress||n||R[l].lpAddress||null;R[l].timestamp=Date.now();R[l].failed=0;Dn(r,l,o.data,false,o.lpAddress||n);return{data:o.data,lpAddress:o.lpAddress||n}}catch(t){R[l]=R[l]||{};R[l].failed=(R[l].failed||0)+1;R[l].timestamp=Date.now();console.warn("fetchAndUpdateChart error",{tokenId:l,error:t});return null}})();P.set(l,e);try{return await e}finally{P["delete"](l)}}async function In(){try{const e=await b({type:"getAllTokens"});if(e?.ok)R=e.Tokens||{};else R={}}catch(B){R={}}}const Fn={};let Pn=null;const Nn=1500;function On(){if(Pn)return;Pn=setTimeout(()=>{Pn=null;const e=Object.assign({},Fn);for(const t of Object.keys(Fn))delete Fn[t];try{b({type:"setTokens",tokens:e})["catch"](()=>{})}catch(B){}},Nn)}function Rn(e,t){Fn[e]=t;On()}function Dn(e,t,n,r=false,o=null){R[t]={data:n||null,lpAddress:o||R[t]&&R[t].lpAddress||null,timestamp:Date.now(),isError:!!r};Rn(t,{data:R[t].data,lpAddress:R[t].lpAddress,isError:!!r});try{const i=Object.keys(R);if(i.length>sn){const s=i.map(e=>[e,R[e]?.timestamp||0]);s.sort((e,t)=>e[1]-t[1]);const c=i.length-sn;for(let e=0;e<c;e++){delete R[s[e][0]]}}}catch(B){}}let Bn=new WeakMap;const jn=new Set;const Wn=Y(()=>{const t=Array.from(jn);jn.clear();requestAnimationFrame(()=>{for(const e of t){Tn(e)}})},200);const Un=new IntersectionObserver(e=>{for(const t of e){Bn.set(t.target,t.isIntersecting);if(t.isIntersecting){jn.add(t.target);if(window.__rem_marketCapColorsEnabled){try{Gt(t.target)}catch(B){}}}}Wn()},{root:null,rootMargin:"300px 0px 300px 0px",threshold:.2});window.__rem_registerObserver(Un,"visibilityObserver","pulse");function Hn(e){const t=Bn.get(e);if(typeof t==="boolean")return t;return $n(e,.25)}function $n(e,t){if(!e||!e.getBoundingClientRect)return false;const n=e.getBoundingClientRect();const r=window.innerHeight||document.documentElement.clientHeight;const o=Math.min(n.bottom,r)-Math.max(n.top,0);if(n.width<=0||n.height<=0||o<=0)return false;return o/n.height>=t}function zn(e,t,n){if(!e||!t||!t.length){nn(e?.parentElement);return}let r=M.get(e);try{if(r&&r.tokenId&&n&&r.tokenId!==n){try{if(r.chart&&typeof r.chart.remove==="function")r.chart.remove()}catch(B){}M["delete"](e);r=null}if(r){const i=be(t);const s=Array.isArray(i)?i.map(e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close})):[];r.series.setData(s);r.chart.timeScale().fitContent()}else{const c=Kn(e,t,n);if(c){M.set(e,c)}}}catch(o){nn(e?.parentElement);e._renderFailures=(e._renderFailures||0)+1;if(e._renderFailures<2){setTimeout(()=>zn(e,t,n),100)}}}function Kn(e,t,n){if(!window.LightweightCharts){return null}let r=e.querySelector(".rem-chart-canvas");if(!r){r=document.createElement("div");r.className="rem-chart-canvas";r.style.width="140px";r.style.height="50px";e.appendChild(r)}try{r.dataset.remChartFor=n||"chart-"+Math.random().toString(36).slice(2,8)}catch(B){}try{r.dataset.remTokenId=n||""}catch(B){}try{const{createChart:i}=window.LightweightCharts;const s=i(r,{layout:{background:{color:"transparent"},textColor:"transparent"},grid:{vertLines:{visible:false},horzLines:{visible:false}},timeScale:{visible:false,borderVisible:false},rightPriceScale:{visible:false,borderVisible:false},leftPriceScale:{visible:false,borderVisible:false},crosshair:{vertLine:{visible:false},horzLine:{visible:false}},width:140,height:50});const c=s.addSeries(window.LightweightCharts.CandlestickSeries,{upColor:"#26a69a",downColor:"#f57575",wickUpColor:"#26a69a",wickDownColor:"#f57575",borderVisible:false,priceLineVisible:false,drawBorder:false,drawBody:true,drawWick:true});const a=be(t);const l=Array.isArray(a)?a.map(e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close})):[];c.setData(l);s.timeScale().fitContent();return{chart:s,series:c,tokenId:n||null}}catch(o){return null}}function Vn(e){Jn(e)}let Qn=false;function Jn(e){if(Qn)return;Qn=true;requestAnimationFrame(()=>{Qn=false;Ln(e)})}async function Zn(l){let e=Date.now();async function u(){const e=Date.now();const t=new Set;const n=Array.from(document.querySelectorAll(`${l} ${k}`));for(const i of n){const s=wn(i);if(!s)continue;t.add(s);const c=A.get(s);const a=R[s]?.timestamp||(c?.lastProcessed||0);if(!(s&&c&&Hn(i)&&e-a>=rn)){continue}Tn(i)}for(const s of Array.from(A.keys())){if(!t.has(s))A["delete"](s)}const r=Date.now()-e;const o=Math.max(1e3,rn-r);setTimeout(u,o)}u()}async function Gn(e){kn(e);await In();En(e);Ln(e);Zn(e)}function Xn(){Un.disconnect();A.clear();Qn=false}const Yn=1500;let er=null;let o=null;function tr(){if(er)return;try{o=localStorage.getItem("pulseSidePanelState");nr(o,null)}catch(B){o=null}er=setInterval(()=>{try{const e=localStorage.getItem("pulseSidePanelState");if(e===o)return;const t=o;o=e;const n=window.location.pathname;if(!n.includes("/pulse")){nr(e,t)}}catch(B){}},Yn);window.__rem_registerInterval(er,"[GLOBAL] Pulse poll","global")}async function nr(e,t){const n=e==='"pulse"';if(n){try{const o=await O(u,5e3);kn(u);try{for(const i of Array.from(A.keys())){const s=A.get(i);if(!s||!s.element||!document.body.contains(s.element)){A["delete"](i)}}}catch(B){}Gn(u)}catch(r){}}else{kn(u);try{for(const[i,c]of Array.from(A.entries())){if(!c||!c.element||!document.body.contains(c.element)){A["delete"](i)}}}catch(B){}}}const rr=5;const or=85;const ir=[".ri-user-line",".ri-group-3-line",".ri-quill-pen-line"];function sr(){let t=document.getElementById(Q);if(t)return t;t=document.createElement("div");t.id=Q;Object.assign(t.style,{position:"fixed",zIndex:2147483647,display:"none",pointerEvents:"auto",borderRadius:"8px",overflow:"hidden",boxShadow:"0 8px 30px rgba(0,0,0,0.45)",width:"420px",height:"560px",backgroundColor:"#fff"});const e=()=>{t.dataset.inside="1"};window.__rem_registerListener(t,"pointerenter",e,false,"[NITTER] modal pointerenter","pulse");const n=()=>{t.dataset.inside="0";const e=setTimeout(()=>{if(t.dataset.inside!=="1")ar()},or);window.__rem_registerTimeout(e,"[NITTER] modal pointerleave hideTimer","pulse")};window.__rem_registerListener(t,"pointerleave",n,false,"[NITTER] modal pointerleave","pulse");document.body.appendChild(t);return t}function cr(e,t){if(!t||t.includes("i/communities/"))return;const n=sr();const r=n.querySelector("iframe.remastered-x-pulse-feed-active");if(r)try{r.remove()}catch(B){}const o=8;const i=parseInt(n.style.width,10)||420;const s=parseInt(n.style.height,10)||560;const c=Math.max(document.documentElement.clientWidth,window.innerWidth||0);const a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);let l=e.right+o;let u=e.top;if(l+i>c-12)l=e.left-i-o;if(l<12)l=Math.max(12,c-i-12);if(u+s>a-12)u=Math.max(12,a-s-12);if(u<12)u=12;n.style.left=`${l}px`;n.style.top=`${u}px`;n.style.display="block";n.dataset.inside="0";const d=document.createElement("iframe");d.className="remastered-x-pulse-feed-active";d.style.cssText="width:100%;height:100%;border:0;display:block;";n.appendChild(d);requestAnimationFrame(()=>{d.src=`https://nitter.net/${String(t).replace(/^\/+/,"")}`});n.__rem_iframe=d}function ar(){const e=document.getElementById(Q);if(!e)return;const t=e.__rem_iframe||e.querySelector("iframe.remastered-x-pulse-feed-active");if(t){try{t.remove()}catch(B){}delete e.__rem_iframe}e.style.display="none"}function lr(t){try{if(!t||!t.href)return null;const n=new URL(t.href,location.href);const r=n.hostname.toLowerCase();if(!(r==="x.com"||r==="www.x.com"||r.endsWith(".x.com")))return null;let e=n.pathname.replace(/^\/+/,"");if(!e)return null;if(n.search)e+=n.search;if(n.hash)e+=n.hash;return e}catch(B){return null}}function ur(e){const t=[];try{for(const n of ir){const r=Array.from(e.querySelectorAll(n));for(const o of r){let e=o.closest("a");if(e&&e.href&&e.href.includes("x.com")){t.push(e);continue}const i=o.parentElement;if(i){const s=i.querySelectorAll('a[href*="x.com"]');for(const c of s)t.push(c)}}}}catch(B){}return t.filter((e,t,n)=>n.indexOf(e)===t)}function dr(t,n){if(!t)return;if(t.dataset&&t.dataset.__rem_nitterAttached==="1")return;let r=null;let o=null;const e=e=>{try{clearTimeout(o)}catch(B){}r=setTimeout(()=>{try{const e=t.getBoundingClientRect();cr(e,n)}catch(B){}},rr);window.__rem_registerTimeout(r,"[NITTER] el pointerenter showTimer","pulse")};window.__rem_registerListener(t,"pointerenter",e,false,"[NITTER] el pointerenter","pulse");const i=e=>{try{clearTimeout(r)}catch(B){}o=setTimeout(()=>{const e=document.getElementById(Q);if(e&&e.dataset.inside==="1")return;ar()},or);window.__rem_registerTimeout(o,"[NITTER] el pointerleave hideTimer","pulse")};window.__rem_registerListener(t,"pointerleave",i,false,"[NITTER] el pointerleave","pulse");if(t.dataset)t.dataset.__rem_nitterAttached="1"}function mr(n){try{if(!n||!n.querySelectorAll)return null;const r=ur(n);if(!r||r.length===0)return null;let e=null;for(const s of r){const c=lr(s);if(!c||c.includes("i/communities/"))continue;if(c.includes("/status/")||c.split("/").length<=2){e=s;break}}if(!e)e=r[0];const o=lr(e);if(!o)return null;const i=typeof window.extractCoinAge==="function"?window.extractCoinAge:null;let t=null;if(i){try{const a=i(n);if(a&&typeof a==="object"&&(a.nodeType===1||a.nodeType===3)){t=a}else if(typeof a==="number"||typeof a==="string"){const l=Array.from(n.querySelectorAll("span"));for(const u of l){const d=(u.textContent||"").trim();if(hn.test(d)){t=u;break}}}}catch(B){}}if(!t)return null;if(o&&!o.includes("i/communities/")){t.classList.add("remastered-x-pulse-feed-hoverable");dr(t,o)}return t}catch(B){return null}}const fr=10*86400;function pr(e){if(!e)return null;const t=parseFloat(e);if(isNaN(t))return null;if(e.endsWith("s"))return t;if(e.endsWith("m"))return t*60;if(e.endsWith("h"))return t*3600;if(e.endsWith("d"))return t*86400;if(e.endsWith("mo"))return t*30*86400;if(e.endsWith("y"))return t*365*86400;return null}function hr(e){try{const t=e.querySelector(".rounded-full.bg-backgroundSecondary:has(.icon-chef-hat) > span.text-textSecondary");if(!t)return;const n=t.textContent.trim();const r=pr(n);if(r==null)return;if(r<fr){const o=t.closest(".rounded-full.bg-backgroundSecondary:has(.icon-chef-hat)");if(o&&!o.id){o.style.cssText+=`
          border: 1px solid rgb(var(--primary-red) / var(--tw-text-opacity, 0.35));
          background: rgb(var(--chart-down) / var(--tw-text-opacity, 0.12));
          border-radius: 8px;
          padding-left: 8px;
          padding-right: 8px;
        `}}}catch(B){}}function yr(){try{const e=document.querySelector('a[href^="https://solscan.io/"]:has(.ri-time-line.text-textSecondary) > span');if(!e)return;const t=e.textContent.trim();const n=pr(t);if(n==null)return;if(n<fr){const r=document.querySelector('.border.border-primaryStroke\\/70.flex:has(a[href*="https://solscan.io/"]):has(.ri-time-line.text-textSecondary) > .px-\\[8px\\]');if(r){r.style.cssText+=`
          border: 1px solid rgb(var(--primary-red) / var(--tw-text-opacity, 0.35));
          background: rgb(var(--chart-down) / var(--tw-text-opacity, 0.1));
          border-radius: 8px;
          height: 30px;
        `}}}catch(B){}}function wr(e,t=28){if(!e||!e.querySelector)return;const n=`.ri-group-3-line, .ri-quill-pen-line, .ri-user-line`;try{const r=e.querySelector(n);if(!r)return;const o=Number(t)||28;if(r.dataset?.__rem_bigIcon==="1"){const i=r.style.getPropertyValue("font-size")||"";if(i.includes(String(o)))return}r.style.setProperty("font-size",`${o}px`,"important");r.style.setProperty("padding","3px","important");r.style.setProperty("line-height","1","important");r.dataset.__rem_bigIcon="1"}catch(B){}}let gr=null;let _r=window.location.pathname;let br=window.location.href;let vr=null;function xr(){return window.location.pathname.split("/meme/")[1]?.split("/")[0]||null}function kr(){const e=window.location.pathname;if(e.includes("/meme")){return"meme"}else if(e.includes("/pulse")){return"pulse"}return"other"}async function Er(){const s="rem-coin-open-btn";const e=".flex.flex-col.flex-1 > .relative.flex.flex-row:has(#pair-name-tooltip) "+".flex.flex-row.flex-1 > .flex.flex-row.flex-1 > .hidden";const t=e=>{const t=document.getElementById(s);if(t&&t.isConnected)return;if(t)t.remove();const n=document.createElement("div");n.className="rem-coin-open";n.id=s;n.innerHTML=`
      <span class="contents">
        <button type="button"
                class="group rem-coin-ui-btn"
                style="width:24px;height:24px;border-radius:4px;">
          <div style="display:flex;align-items:center;justify-content:center;width:16px;height:16px;">
            <i class="ri-folder-open-fill text-textSecondary"></i>
          </div>
        </button>
      </span>
    `;n.title="Open Jupiter chart";window.__rem_registerComponent(n,"open btn","meme");const r=async e=>{e.stopPropagation();const t=document.querySelector('div:has(.ri-file-list-line) > span a[href^="https://solscan.io/"]');if(!t)return;const n=t.href.split("/").pop();if(!n)return;const r=Math.floor(Date.now());const o=`https://datapi.jup.ag/v2/charts/${n}?interval=1_SECOND&to=${r}&candles=10000&quote=usd`;try{const s=await fetch(o);if(!s.ok)throw new Error(`HTTP ${s.status}`);const c=await s.json();chrome.runtime.sendMessage({type:"REM_DOWNLOAD_JSON",filename:`${n}.json`,data:c})}catch(i){console.error("[REM] Failed to download JSON",i)}};window.__rem_registerListener(n,"click",r,false,"Open jup OHLC","meme");const o=()=>{if(!e.isConnected)return;if(document.getElementById(s))return;try{e.insertBefore(n,e.firstChild)}catch(B){e.appendChild(n)}};o();const i=new MutationObserver(e=>{let t=false;for(const n of e){for(const r of n.removedNodes){if(r.id===s)t=true}}if(t||!document.getElementById(s)){o()}});i.observe(e,{childList:true});window.__rem_registerObserver(i,"OpenBtn Persistence","meme")};window.__rem_registerDOMWatcher(e,t,"meme")}function Cr(){O(U).then(()=>{if(window.__rem_pulseCloneMenu)fe()});O(t).then(()=>Gn(t))}async function Sr(){try{Bt()}catch(B){console.warn("initHoldersBalanceClasses failed",B)}gt()["catch"](e=>console.warn("MirrorButton failed",e));Dt()["catch"](e=>console.warn("StreamContainer failed",e));await Fe()["catch"](e=>console.warn("MemeInfo failed",e));Pe()["catch"](e=>console.warn("TwitterContainer failed",e))}async function Lr(){if(!history.__rem_patched){const o=history.pushState;history.pushState=function(...e){o.apply(this,e);window.dispatchEvent(new Event("rem:navigation"))};const i=history.replaceState;history.replaceState=function(...e){i.apply(this,e);window.dispatchEvent(new Event("rem:navigation"))};history.__rem_patched=true}try{m()}catch(B){}try{ft()}catch(B){}let s=null;window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("rem:navigation"))});const n=Y(t,50);const r=()=>{try{if(!document.getElementById($))m()}catch(B){}};const e=new MutationObserver(e=>{const t=e.every(e=>{const t=e.target;if(e.type==="characterData")return true;if(t.closest&&(t.closest(".rem-price-chart")||t.closest("#rem-pnl-mirror")))return true;if(t.closest&&t.closest(u))return true;return false});if(t)return;n();r();if(window.__rem_pulseCloneMenu){c()}});e.observe(document.body,{childList:true,subtree:true});window.__rem_registerObserver(e,"body route observer","global");async function t(){const e=window.location.pathname;const t=window.location.search||"";const n=e+t;if(s!==null&&n===s)return;const r=s||"";s=n;const o=r.split("?")[0]||"";const i=e||"";window.__rem_pageToken=(window.__rem_pageToken||0)+1;try{if(r!==n){if(o?.startsWith("/pulse")){__rem_cleanupPage("pulse");document.querySelectorAll(k).forEach(Cn);P.clear()}else if(o?.startsWith("/meme")){__rem_cleanupPage("meme");P.clear()}}}catch(B){}if(window.location.hostname.includes("axiom.trade")){m();ft()}if(window.__rem_pulseCloneMenu){if(i.startsWith("/pulse")){me("pulse")}else{me("other")}}if(i.startsWith("/pulse")){gr="pulse";Cr()}else if(i.startsWith("/meme")){gr="meme";vr=xr();try{Sr()}catch(B){console.log("initMemePage error",B)}}else{gr="other"}}window.addEventListener("rem:navigation",t);t()}chrome.storage.onChanged.addListener((e,t)=>{if(t!=="local")return;if(!e.Data)return;if(e.KeyboardShortcuts){try{const n=!!e.KeyboardShortcuts.newValue;const r=document.getElementById(REM_QUICK_CONTAINER);if(r)r.id=n?"rem-keys-enabled":"rem-keys-disabled";try{kbShortcutsEnabled=n}catch(B){}try{updateActiveClasses(n,buyMode)}catch(B){}}catch(B){}}if(e.pulseCloneMenu){window.__rem_pulseCloneMenu=!!e.pulseCloneMenu.newValue;const o=document.getElementById(CLONED_MENU_ID);if(!window.__rem_pulseCloneMenu){if(o)o.remove();try{window.__rem_cleanupPage("global")}catch(B){}const i=document.querySelector(U);if(i)i.style.display="";document.body.classList.remove("rem-pulse-clone-menu-enabled")}if(window.__rem_pulseCloneMenu){fe()}}if(e.marketCapColors){try{window.__rem_marketCapColorsEnabled=!!e.marketCapColors.newValue}catch(B){}}if(e.chartsForAll){try{window.__rem_chartsForAll=!!e.chartsForAll.newValue}catch(B){}}if(e.twitterPreview){try{window.__rem_twitterPreview=!!e.twitterPreview.newValue}catch(B){}}if(e.bigTwitterLinks){try{const n=!!e.bigTwitterLinks.newValue;window.__rem_bigTwitterLinks=n;applyIconSize(n,28)}catch(B){}}if(e.Tokens){try{const s=e.Tokens.newValue||{};Object.keys(s).forEach(e=>{try{R[e]=s[e]}catch(B){}})}catch(B){}}});tr();
